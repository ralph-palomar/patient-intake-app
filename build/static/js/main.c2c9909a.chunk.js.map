{"version":3,"sources":["config.js","users.js","basicinfo.js","illnesses.js","medications.js","vitalsigns.js","diet.js","others.js","appointment.js","home.js","index.js"],"names":["api","process","cookieSettings","defaultImg","illnesses","diet_list","displayText","id","tobacco_use_0_options","emotional_being_options","login_cookie","emailRegExp","defaultEmailSender","Users","props","searchUser","event","keyword","target","value","setState","state","userList","originalUserList","filter","firstname","match","RegExp","lastname","email","handleClickRefresh","getAllUsers","data","handleUserViewClick","user","document","querySelector","pushPage","then","user_profile_component","ReactDOM","render","picture","openedBy","type","enabled","refreshUsersBtn","addEventListener","this","nav","leavePage","matches","Fragment","style","width","placeholder","onKeyUp","backgroundColor","map","index","key","modifier","tappable","onClick","className","align","src","alt","height","marginLeft","React","Component","SaveBasicInfo","handleClick","payload","cookies","get","basic_lastname","basic_firstname","basic_middlename","basic_dob","basic_gender","basic_addr","basic_landlineno","basic_mobileno","basic_email","basic_supportperson","basic_relationship","basic_supportcontactno","callApi","access_token","showAlert","BasicInfo","onChange","date","formattedDate","formatDate","basicinfo_saveBtn","display","Date","clearIcon","selected","rows","cols","defaultValue","BasicInfoProfile","textAlign","next","icon","_default","formatToDateString","SaveIllnesses","illnessesList","checked","illness_others","Illnesses","currentState","Object","keys","length","illnesses_saveBtn","input-id","htmlFor","IllnessesProfile","prev","item","MedicationForm","medicationList","bgcolor","drug_name","dosage","purpose","date_started","onChangeCallback","SaveMedications","back","saveMedications","refresh","click","NewMedicationItem","handleChange","save_new_medication","Medications","removeMedication","addMedication","medications_list_length","querySelectorAll","new_component","initial_state","confirm","getAttribute","ons","notification","refreshMedicationList","medications_saveBtn","fab_add_medication","successCallBack","config","refreshMedications","callBack","medicationCount","i","medication","push","MedicationsProfile","VitalSignsForm","vsList","vs_date","onDateChangeCallback","vs_time","formatTime","time","onTimeChangeCallback","vs_bloodpressure","vs_heartrate","vs_respirate","vs_temp","vs_weight","vs_weight_unit","name","vs_height","vs_bmi","vs_waistcirc","vs_hipcirc","vs_whratio","SaveVitalSigns","saveVitalSigns","NewVitalSignItem","handleDateChange","handleTimeChange","save_new_vs","VitalSigns","removeVitalSign","addVitalSign","vs_list_length","handleChangeState","refreshVitalSigns","refreshVSList","vitalsigns_saveBtn","fab_add_vitalsign","vsCount","vs","VitalSignsProfile","formatToTimeString","DietForm","dietList","expandable","quantity","selectedIndex","unit_selected","ref","unitRef","SaveDiet","unit","quantity_dom","unit_dom","Diet","diet_saveBtn","forEach","DietProfile","OtherForm","physical_activity_0","physical_activity_1","physical_activity_2","sleep_0","sleep_1","sleep_2","float","tobacco_use_0","tobacco_use_1","tobacco_use_2","tobacco_use_3","alcohol_use_0","alcohol_use_1","emotional_being_0","emotional_being_1","SaveOthers","Others","createRef","others_saveBtn","current","OthersProfile","Appointment","myEventsList","title","start","moment","toDate","end","add","handleEventDrop","handleEventResize","lastEvent","DnDCalendar","withDragAndDrop","Calendar","localizer","momentLocalizer","setTimeout","appointment_calendar","events","startAccessor","endAccessor","defaultView","views","scrollToTime","selectable","resizable","step","timeslots","onEventDrop","onEventResize","openMenu","position","label","page","window","fn","open","getElementById","load","close","main","getUserPhoto","user_list","medical_record_main","schedule_appointment_main","logout","createAccount","login","register","loadPage","Profile","handlePictureClick","handlePictureChange","reader","FileReader","readAsDataURL","files","onloadend","result","new_pp_component","crop","ruleOfThirds","circularCrop","cropChange","onImageLoaded","imageLoaded","onComplete","cropComplete","save_new_pp","putUser","croppedImageData","accountInfo","image","imageRef","newCrop","canvas","createElement","scaleX","naturalWidth","scaleY","naturalHeight","ctx","getContext","drawImage","x","y","croppedImage","toDataURL","handleEditAccess","popover","show","handleChangePassword","change_password_popover","profile_settings_popover","hide","handleChangePasswdSubmit","validatePasswords","passwd","cpasswd","successCallback","verifyUserPwd","verified","password","currentpasswd","sendEmail","to","from","subject","body","handleViewOptions","viewSwitch","handleSwitch","carousel","setActiveIndex","scrollIntoView","aspect","profile_basic_info","getBasicInfo","innerHTML","profile_illnesses","getIllnesses","profile_medications","getMedications","profile_vital_signs","getVitalSigns","profile_diet","getDiet","profile_others","getOthers","isAdminSwitch","isEnabledSwitch","profile_settings","imgSrc","displayCamIcon","displayEditIcon","direction","cancelable","marginTop","MedicalRecord","tabbar","basicinfo_form","illnesses_list","medications_list","vitalsigns_list","others_list","class","marginBottom","caller","identifier","resetUserPassword","verifyResetPassword","code","verifyUserId","obtainVerificationCode","Cookies","setLoginCookie","navigator","home","test","validateRegistrationForm","userInfoData","callbackUrl","popPage","a","displayAlert","progress_bar","axios","response","error","catch","msg","timeout","toast","animation","getFullYear","getMonth","getDate","getHours","padStart","getMinutes","toDateString","d","HH","split","mm","setHours","setMinutes","setSeconds","toLocaleTimeString","cookieData","thirdPartyLogin","application","setDate","set","path","expires","sameSite","input","undefined","trim","getUrlParameter","replace","results","exec","location","search","decodeURIComponent","App","responseFacebook","userInfo","accessToken","exists","alert","href","handleLogout","remove","resetToPage","pop","renderFacebookLogin","renderForgotPassword","facebook_loginBtn","appId","autoLoad","fields","size","callback","forgotPasswordBtn","activeLogin","enterPage","confirm_logout","message","onOk","badge","admin_menu","pull_hook","dispatchEvent","Event","landingPage","swipeable","ConfirmDialog","handleCancel","dialog","Badge","ForgotPassword","handlePopoverClick","handleSubmit","ChangePassword","VerifyAccount","create","verifyAccount","validated","onload","op"],"mappings":"k/BAAaA,G,0CACWC,6CADXD,EAEgBC,iGAFhBD,EAGU,IAGVE,EACHD,0BADGC,EAGCD,OAGDE,EAAa,y8GAEbC,EAAY,CACrB,sBACA,SACA,yBACA,oBACA,cACA,kBACA,eACA,qCACA,0BACA,OACA,iBACA,UAGSC,EAAY,CACrB,CACIC,YAAa,eACbC,GAAI,oBAER,CACID,YAAa,SACbC,GAAI,eAER,CACID,YAAa,aACbC,GAAI,mBAER,CACID,YAAa,gBACbC,GAAI,sBAER,CACID,YAAa,OACbC,GAAI,aAER,CACID,YAAa,QACbC,GAAI,cAER,CACID,YAAa,QACbC,GAAI,cAER,CACID,YAAa,yBACbC,GAAI,qBAER,CACID,YAAa,MACbC,GAAI,YAER,CACID,YAAa,OACbC,GAAI,aAER,CACID,YAAa,OACbC,GAAI,aAER,CACID,YAAa,QACbC,GAAI,cAER,CACID,YAAa,aACbC,GAAI,kBAER,CACID,YAAa,0BACbC,GAAI,gCAER,CACID,YAAa,YACbC,GAAI,aAER,CACID,YAAa,QACbC,GAAI,cAER,CACID,YAAa,SACbC,GAAI,eAER,CACID,YAAa,YACbC,GAAI,iBAER,CACID,YAAa,oBACbC,GAAI,mBAER,CACID,YAAa,kBACbC,GAAI,kBAER,CACID,YAAa,eACbC,GAAI,kBAER,CACID,YAAa,uBACbC,GAAI,uBAER,CACID,YAAa,aACbC,GAAI,kBAER,CACID,YAAa,OACbC,GAAI,aAER,CACID,YAAa,iBACbC,GAAI,wBAICC,EAAwB,CACjC,aACA,iBACA,eAGSC,EAA0B,CAAE,EAAG,EAAG,EAAG,EAAG,GAExCC,EAAe,iCAEfC,EAAc,8CAEdC,EAAqB,4B,gCC3IrBC,EAAb,kDACI,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAMVC,WAAa,SAACC,GACV,IAAMC,EAAUD,EAAME,OAAOC,MAC7B,EAAKC,UAAS,SAAAC,GAOV,MAAO,CACHC,SAPoBD,EAAME,iBACWC,QAAO,SAACL,GAC7C,OAAOA,EAAMM,UAAUC,MAAM,IAAIC,OAAOV,EAAQ,OAC5CE,EAAMS,SAA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","file":"static/js/main.c2c9909a.chunk.js","sourcesContent":["export const api = {\r\n    users_api_base_url: process.env.REACT_APP_USERS_API_BASE_URL,\r\n    users_api_authorization: process.env.REACT_APP_USERS_API_AUTHORIZATION,\r\n    users_api_timeout: 10000\r\n};\r\n\r\nexport const cookieSettings = {\r\n    path: process.env.REACT_APP_HOME_PAGE,\r\n    secure: process.env.REACT_APP_COOKIES_SECURE,\r\n    sameSite: process.env.REACT_APP_COOKIES_SAMESITE\r\n}\r\n\r\nexport const defaultImg = \"data:image/png;base64,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\";\r\n\r\nexport const illnesses = [\r\n    \"Anxiety&/Depression\",\r\n    \"Cancer\",\r\n    \"Chronic Kidney Disease\",\r\n    \"Diabetes Mellitus\",\r\n    \"Fatty liver\",\r\n    \"Gouty Arthritis\",\r\n    \"Hypertension\",\r\n    \"Myocardial Infarction/Heart Attack\",\r\n    \"Obesity/Weight Problems\",\r\n    \"PCOS\",\r\n    \"Stress/Burnout\",\r\n    \"Stroke\"\r\n]\r\n\r\nexport const diet_list = [\r\n    { \r\n        displayText: \"Whole grains\", \r\n        id: \"diet_wholegrains\" \r\n    },\r\n    {\r\n        displayText: \"Fruits\",\r\n        id: \"diet_fruits\"\r\n    },\r\n    {\r\n        displayText: \"Vegetables\",\r\n        id: \"diet_vegetables\"\r\n    },\r\n    {\r\n        displayText: \"Beans/legumes\",\r\n        id: \"diet_beans_legumes\"\r\n    },\r\n    {\r\n        displayText: \"Nuts\",\r\n        id: \"diet_nuts\"\r\n    },\r\n    {\r\n        displayText: \"Seeds\",\r\n        id: \"diet_seeds\"\r\n    },\r\n    {\r\n        displayText: \"Water\",\r\n        id: \"diet_water\",\r\n    },\r\n    {\r\n        displayText: \"Meat (other than fish)\",\r\n        id: \"diet_meat_notfish\"\r\n    },\r\n    {\r\n        displayText: \"Egg\",\r\n        id: \"diet_egg\"\r\n    },\r\n    {\r\n        displayText: \"Soda\",\r\n        id: \"diet_soda\"\r\n    },\r\n    {\r\n        displayText: \"Milk\",\r\n        id: \"diet_milk\"\r\n    },\r\n    {\r\n        displayText: \"Chips\",\r\n        id: \"diet_chips\"\r\n    },\r\n    {\r\n        displayText: \"Fried Food\",\r\n        id: \"diet_friedfood\"\r\n    },\r\n    {\r\n        displayText: \"Cakes/pastries/crackers\",\r\n        id: \"diet_cakes_pastries_crackers\"\r\n    },\r\n    {\r\n        displayText: \"Chocolate\",\r\n        id: \"diet_choc\"\r\n    },\r\n    {\r\n        displayText: \"Bread\",\r\n        id: \"diet_bread\"\r\n    },\r\n    {\r\n        displayText: \"Cheese\",\r\n        id: \"diet_cheese\"\r\n    },\r\n    {\r\n        displayText: \"Fast food\",\r\n        id: \"diet_fastfood\"\r\n    },\r\n    {\r\n        displayText: \"Caffeinated drink\",\r\n        id: \"diet_caff_drink\"\r\n    },\r\n    {\r\n        displayText: \"Instant noodles\",\r\n        id: \"diet_inst_nood\"\r\n    },\r\n    {\r\n        displayText: \"Canned goods\",\r\n        id: \"diet_can_goods\"\r\n    },\r\n    {\r\n        displayText: \"Dairy-based dressing\",\r\n        id: \"diet_dairy_dressing\"\r\n    },\r\n    {\r\n        displayText: \"White rice\",\r\n        id: \"diet_whiterice\"\r\n    },\r\n    {\r\n        displayText: \"Fish\",\r\n        id: \"diet_fish\"\r\n    },\r\n    {\r\n        displayText: \"Other seafoods\",\r\n        id: \"diet_other_seafoods\"\r\n    }\r\n]\r\n\r\nexport const tobacco_use_0_options = [\r\n    \"Non-smoker\",\r\n    \"Current smoker\",\r\n    \"Past smoker\"\r\n]\r\n\r\nexport const emotional_being_options = [ 5, 4, 3, 2, 1 ]\r\n\r\nexport const login_cookie = \"webapp-lifestyleclinic-login-0\";\r\n\r\nexport const emailRegExp = /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;\r\n\r\nexport const defaultEmailSender = \"LifestyleClinic@tes8.link\";","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { defaultImg } from './config.js';\r\nimport { Profile, getAllUsers } from './home.js';\r\n\r\nexport class Users extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userList: []\r\n        }\r\n\r\n    }\r\n    searchUser = (event) => {\r\n        const keyword = event.target.value;\r\n        this.setState(state => {\r\n            const currentUserList = state.originalUserList;\r\n            const filteredUserList = currentUserList.filter((value) => {\r\n                return value.firstname.match(new RegExp(keyword,\"i\")) ||\r\n                    value.lastname.match(new RegExp(keyword,\"i\")) ||\r\n                    value.email.match(new RegExp(keyword,\"i\"))\r\n            });\r\n            return {\r\n                userList: filteredUserList\r\n            }\r\n        })\r\n    }\r\n    componentDidMount() {\r\n        getAllUsers((data) => {\r\n            this.setState({\r\n                userList: data,\r\n                originalUserList: data\r\n            });\r\n        }, 'users');\r\n\r\n        const refreshUsersBtn = document.querySelector('#refreshUsersBtn');\r\n        if (refreshUsersBtn != null) {\r\n            refreshUsersBtn.addEventListener('click', this.handleClickRefresh);\r\n        }\r\n\r\n        const nav = document.querySelector('#navigator');\r\n        if (nav != null) {\r\n            nav.addEventListener('postpop', (event)=> {\r\n                if (event.leavePage.matches('#user_profile')) {\r\n                    getAllUsers((data) => {\r\n                        this.setState({\r\n                            userList: data,\r\n                            originalUserList: data\r\n                        });\r\n                    }, 'users');\r\n                }\r\n            });\r\n        }\r\n    }\r\n    handleClickRefresh = (event) => {\r\n        getAllUsers((data) => {\r\n            this.setState({\r\n                userList: data,\r\n                originalUserList: data\r\n            });\r\n        }, 'users');\r\n    }\r\n    handleUserViewClick = (user) => {\r\n        if (user.email != null) {\r\n            const nav = document.querySelector('#navigator');\r\n            nav.pushPage('user_profile.html').then(() => {\r\n                const user_profile_component = document.querySelector('#user_profile_component');\r\n                ReactDOM.render(<Profile picture={user.picture} email={user.email} openedBy=\"admin\" type={user.type} enabled={user.enabled} />, user_profile_component);\r\n            });\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <ons-search-input style={{ width: '100%'}} placeholder=\"Search\" onKeyUp={this.searchUser}></ons-search-input>\r\n                <ons-list>\r\n                <ons-list-header style={{ backgroundColor: '#e6f2ff'}}><b>User Accounts</b></ons-list-header>\r\n                    <ons-lazy-repeat>\r\n                    {\r\n                        \r\n                        this.state.userList.map((value, index) =>\r\n                            <ons-list-item index={index} key={value.email} modifier=\"chevron\" tappable onClick={(event) => {this.handleUserViewClick(value)}} >\r\n                                <div className=\"left\" align=\"center\">\r\n                                    <img className=\"list-item--material__thumbnail\" src={value.picture != null ? value.picture : defaultImg} alt=\"Profile Pic\" style={{width: '60px', height: '60px'}} ></img>\r\n                                </div>\r\n                                <div className=\"center\" style={{ marginLeft: '8px'}}>\r\n                                    <span className=\"list-item__title\">{value.firstname + \" \" + value.lastname}</span>\r\n                                    <span className=\"list-item__subtitle\">{value.email}</span>\r\n                                    <span className=\"list-item__subtitle\">\r\n                                        <i className={value.type === \"user\" ? \"zmdi zmdi-account zmdi-hc-lg\" : \"zmdi zmdi-star-outline zmdi-hc-lg\"}></i>&nbsp;\r\n                                        <i className={value.enabled ? \"zmdi zmdi-check zmdi-hc-lg\" : \"zmdi zmdi-close zmdi-hc-lg\"}></i>\r\n                                    </span>\r\n                                </div>                                              \r\n                            </ons-list-item>\r\n \r\n                        )\r\n                    }\r\n                    </ons-lazy-repeat>\r\n                </ons-list>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport DatePicker from 'react-date-picker';\r\nimport { callApi, showAlert, cookies, formatDate, formatToDateString, _default } from './index.js';\r\nimport { api, login_cookie } from './config.js';\r\n\r\nexport class SaveBasicInfo extends React.Component {\r\n\thandleClick = (event) => {\r\n\t\tconst payload = {\r\n\t\t\tid: cookies.get(login_cookie).email,\r\n\t\t\tbasic_lastname: document.querySelector('#basic_lastname').value,\r\n\t\t\tbasic_firstname: document.querySelector('#basic_firstname').value,\r\n\t\t\tbasic_middlename: document.querySelector('#basic_middlename').value,\r\n\t\t\tbasic_dob: document.querySelector('#basic_dob').value,\r\n\t\t\tbasic_gender: document.querySelector('#basic_gender').value,\r\n\t\t\tbasic_addr: document.querySelector('#basic_addr').value,\r\n\t\t\tbasic_landlineno: document.querySelector('#basic_landlineno').value,\r\n\t\t\tbasic_mobileno: document.querySelector('#basic_mobileno').value,\r\n\t\t\tbasic_email: document.querySelector('#basic_email').value,\r\n\t\t\tbasic_supportperson: document.querySelector('#basic_supportperson').value,\r\n\t\t\tbasic_relationship: document.querySelector('#basic_relationship').value,\r\n\t\t\tbasic_supportcontactno: document.querySelector('#basic_supportcontactno').value\r\n\t\t};\r\n\t\tconst config = {\r\n\t\t\t\"url\": api.users_api_base_url + \"/v1/basicInfo\",\r\n\t\t\t\"method\": \"POST\",\r\n\t\t\t\"timeout\": api.users_api_timeout,\r\n\t\t\t\"headers\": {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\"Authorization\": api.users_api_authorization,\r\n\t\t\t\t\"JWT\": cookies.get(login_cookie).access_token\r\n\t\t\t},\r\n\t\t\t\"data\": payload\r\n\t\t};\r\n\t\tcallApi(config, (data) => {\r\n\t\t\tshowAlert(\"Successfully saved data\");\r\n\t\t}, 'basic');\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ons-button modifier=\"quiet\" onClick={this.handleClick}>Save</ons-button>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport class BasicInfo extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = props.data;\r\n\t}\r\n\tonChange = (date) => {\r\n\t\tif (date != null) {\r\n\t\t\tconst formattedDate = formatDate(date);\r\n\t\t\tthis.setState({\r\n\t\t\t\tbasic_dob: formattedDate\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tconst basicinfo_saveBtn = document.querySelector('div#basicinfo_saveBtn');\r\n        if (basicinfo_saveBtn != null) ReactDOM.render(<SaveBasicInfo/>, basicinfo_saveBtn);\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t<ons-list>\r\n            \t<ons-list-header style={{ backgroundColor: '#e6f2ff'}}><b>Please fill up the form</b></ons-list-header>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"form\">Last Name</label><br />\r\n\t\t\t\t\t<ons-input id=\"basic_lastname\" modifier=\"material\" value={this.state.basic_lastname || \"\"}></ons-input>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"form\">First Name</label><br />\r\n\t\t\t\t\t<ons-input id=\"basic_firstname\" modifier=\"material\" value={this.state.basic_firstname || \"\"}></ons-input>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"form\">Middle Name</label><br />\r\n\t\t\t\t\t<ons-input id=\"basic_middlename\" modifier=\"material\" value={this.state.basic_middlename || \"\"}></ons-input>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"form\">Date of Birth</label><br />\r\n\t\t\t\t\t<ons-input id=\"basic_dob\" style={{display: 'none'}} value={this.state.basic_dob}></ons-input>\r\n\t\t\t\t\t<DatePicker onChange={this.onChange} value={this.state.basic_dob !== \"\" && this.state.basic_dob != null ? new Date(this.state.basic_dob) : new Date()} clearIcon={null} />\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"form\">Gender</label>\r\n\t\t\t\t\t<select className=\"select-input\" id=\"basic_gender\" modifier=\"material\">\r\n\t\t\t\t\t\t<option value=\"Male\" selected={this.state.basic_gender === \"Male\" ? true : false}>Male</option>\r\n\t\t\t\t\t\t<option value=\"Female\" selected={this.state.basic_gender === \"Female\" ? true : false}>Female</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"form\">Address</label><br />\r\n\t\t\t\t\t<textarea id=\"basic_addr\" className=\"textarea\" rows=\"3\" cols=\"35\" defaultValue={this.state.basic_addr || \"\"}></textarea>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"form\">Landline No.</label><br />\r\n\t\t\t\t\t<ons-input type=\"number\" id=\"basic_landlineno\" modifier=\"material\" value={this.state.basic_landlineno || \"\"}></ons-input>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"form\">Mobile No.</label><br />\r\n\t\t\t\t\t<ons-input type=\"number\" id=\"basic_mobileno\" modifier=\"material\" value={this.state.basic_mobileno || \"\"}></ons-input>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"form\">Email Address</label><br />\r\n\t\t\t\t\t<ons-input type=\"email\" id=\"basic_email\" modifier=\"material\" value={this.state.basic_email || \"\"}></ons-input>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"form\">Support Person</label><br />\r\n\t\t\t\t\t<ons-input id=\"basic_supportperson\" modifier=\"material\" value={this.state.basic_supportperson || \"\"}></ons-input>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"form\">Relationship</label><br />\r\n\t\t\t\t\t<ons-input id=\"basic_relationship\" modifier=\"material\" value={this.state.basic_relationship || \"\"}></ons-input>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"form\">Support Contact No.</label> <br />\r\n\t\t\t\t\t<ons-input type=\"number\" id=\"basic_supportcontactno\" modifier=\"material\" value={this.state.basic_supportcontactno || \"\"}></ons-input><br />\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t</ons-list>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport class BasicInfoProfile extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = props.data;\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ons-list>\r\n\t\t\t\t<ons-list-header style={{ textAlign: 'center' }}>\r\n\t\t\t\t\tBasic Information\r\n\t\t\t\t\t<ons-button modifier=\"quiet\" onClick={()=>{document.querySelector('#carousel').next()}}><ons-icon icon=\"md-chevron-right\"></ons-icon></ons-button>\r\n\t\t\t\t</ons-list-header>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"profile\">Date of Birth</label>\r\n\t\t\t\t\t<div>{_default(formatToDateString(this.state.basic_dob), \"--\")}</div>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"profile\">Address</label>\r\n\t\t\t\t\t<div className=\"profile\">{_default(this.state.basic_addr, \"--\")}</div>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"profile\">Gender</label>\r\n\t\t\t\t\t<div>{_default(this.state.basic_gender, \"--\")}</div>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"profile\">Email Address</label>\r\n\t\t\t\t\t<div>{_default(this.state.basic_email, \"--\")}</div>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"profile\">Landline Number</label>\r\n\t\t\t\t\t<div>{_default(this.state.basic_landlineno, \"--\")}</div>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"profile\">Mobile Number</label>\r\n\t\t\t\t\t<div>{_default(this.state.basic_mobileno, \"--\")}</div>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"profile\">Support Person</label>\r\n\t\t\t\t\t<div>{_default(this.state.basic_supportperson, \"--\")}</div>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"profile\">Relationship</label>\r\n\t\t\t\t\t<div>{_default(this.state.basic_relationship, \"--\")}</div>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t\t<ons-list-item>\r\n\t\t\t\t\t<label className=\"profile\">Support Contact Number</label>\r\n\t\t\t\t\t<div>{_default(this.state.basic_supportcontactno, \"--\")}</div>\r\n\t\t\t\t</ons-list-item>\r\n\t\t\t</ons-list>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { cookies, callApi, showAlert, _default } from './index.js';\r\nimport { illnesses, api, login_cookie } from './config.js';\r\n\r\nexport class SaveIllnesses extends React.Component {\r\n\thandleClick = (event) => {\r\n\t\tconst payload = {\r\n            id: cookies.get(login_cookie).email,\r\n            illnessesList: illnesses.map((value, index) => {\r\n                return {\r\n                    selected: document.querySelector('#illness_'+index).checked,\r\n                    displayText: value\r\n                }\r\n            }),\r\n            illness_others: document.querySelector('#illness_others').value\r\n        }\r\n\t\tconst config = {\r\n\t\t\t\"url\": api.users_api_base_url + \"/v1/illnesses\",\r\n\t\t\t\"method\": \"POST\",\r\n\t\t\t\"timeout\": api.users_api_timeout,\r\n\t\t\t\"headers\": {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": api.users_api_authorization,\r\n                \"JWT\": cookies.get(login_cookie).access_token\r\n\t\t\t},\r\n\t\t\t\"data\": payload\r\n\t\t};\r\n\t\tcallApi(config, (data) => {\r\n\t\t\tshowAlert(\"Successfully saved data\");\r\n\t\t}, 'illnesses');\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ons-button modifier=\"quiet\" onClick={this.handleClick}>Save</ons-button>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport class Illnesses extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let currentState;\r\n        if (Object.keys(props.data).length === 0) {\r\n            currentState = {\r\n                illnessesList: illnesses.map((value) => {\r\n                    return {\r\n                        selected: false,\r\n                        displayText: value\r\n                    }\r\n                })\r\n            }\r\n        } else {\r\n            currentState = props.data;\r\n        }\r\n        this.state = currentState;\r\n    }\r\n    componentDidMount() {\r\n        const illnesses_saveBtn = document.querySelector('div#illnesses_saveBtn');\r\n        if (illnesses_saveBtn != null) ReactDOM.render(<SaveIllnesses/>, illnesses_saveBtn);\r\n    }\r\n    render() {\r\n        return (\r\n        <React.Fragment> \r\n            <ons-list>\r\n                <ons-list-header style={{ backgroundColor: '#e6f2ff'}}><b>Please select</b></ons-list-header>\r\n                {\r\n                    this.state.illnessesList.map((value, index) =>\r\n                        <ons-list-item key={value.displayText} tappable>  \r\n                            <label className=\"left\">\r\n                            {value.selected ? <ons-checkbox id={\"illness_\"+index} input-id={value.displayText} checked></ons-checkbox> : <ons-checkbox id={\"illness_\"+index} input-id={value.displayText}></ons-checkbox> }\r\n                            </label>\r\n                            <label htmlFor={value.displayText} className=\"center\">\r\n                                {value.displayText}\r\n                            </label>\r\n                        </ons-list-item>              \r\n                    )\r\n                }\r\n                <ons-list-item>\r\n                    <label className=\"form\">Specify Others</label>\r\n                    <textarea id=\"illness_others\" className=\"textarea\" rows=\"3\" cols=\"35\" defaultValue={this.state.illness_others || \"\"}></textarea>\r\n                </ons-list-item> \r\n            </ons-list>  \r\n        </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport class IllnessesProfile extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n        this.state = props.data;\r\n\t}\r\n\trender() {\r\n        const illnessesList = this.state.illnessesList || [];\r\n\t\treturn (\r\n\t\t\t<ons-list>\r\n                <ons-list-header style={{ textAlign: 'center' }}>\r\n                    <ons-button modifier=\"quiet\" onClick={()=>{document.querySelector('#carousel').prev()}}><ons-icon icon=\"md-chevron-left\"></ons-icon></ons-button>\r\n                    Illnesses/Conditions\r\n\t\t\t\t\t<ons-button modifier=\"quiet\" onClick={()=>{document.querySelector('#carousel').next()}}><ons-icon icon=\"md-chevron-right\"></ons-icon></ons-button>\r\n\t\t\t\t</ons-list-header>\r\n                {\r\n                    illnessesList.filter(item => item.selected === true).map(item => {\r\n                        return (\r\n                            <ons-list-item>\r\n                                {item.displayText}\r\n                            </ons-list-item>\r\n                        )\r\n                    })\r\n                }\r\n                <ons-list-item>\r\n                    <label className=\"profile\">Others</label>\r\n                        <div>{_default(this.state.illness_others, \"--\")}</div>\r\n                    </ons-list-item>\r\n\t\t\t</ons-list>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport DatePicker from 'react-date-picker';\r\nimport { cookies, callApi, showAlert, formatDate, back, formatToDateString, _default } from './index.js';\r\nimport { api, login_cookie } from './config.js';\r\nimport ons from 'onsenui';\r\n\r\nfunction MedicationForm(props) {\r\n    const id = props.medicationList[props.index].id;\r\n    const bgcolor = props.index % 2 === 0 ? '#ffffff' : '#f0f0f5';\r\n    return (\r\n        <React.Fragment>\r\n            <div style={{ backgroundColor: bgcolor }}>\r\n                <ons-list-item>\r\n                    <label className=\"form\">Name of Drug</label>\r\n                    <ons-input id={\"drug_name\" + id} modifier=\"material\" value={props.medicationList[props.index].drug_name}></ons-input>\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"form\">Dosage</label>\r\n                    <ons-input id={\"dosage\" + id} modifier=\"material\" value={props.medicationList[props.index].dosage}></ons-input>\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"form\">Purpose</label>\r\n                    <ons-input id={\"purpose\" + id} modifier=\"material\" value={props.medicationList[props.index].purpose}></ons-input>\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"form\">Date Started</label>\r\n                    <ons-input id={\"date_started\" + id} style={{ display: 'none' }} value={props.medicationList[props.index].date_started == null || props.medicationList[props.index].date_started.length === 0 ? formatDate(new Date()) : props.medicationList[props.index].date_started} ></ons-input>\r\n                    <DatePicker onChange={date => { props.onChangeCallback(props.index, date) }} value={props.medicationList[props.index].date_started == null || props.medicationList[props.index].date_started.length === 0 ? new Date() : new Date(props.medicationList[props.index].date_started)} clearIcon={null} />\r\n                </ons-list-item>\r\n            </div>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport class SaveMedications extends React.Component {\r\n    handleClick = (event) => {\r\n        if (this.props.item != null && this.props.item === 'new') {\r\n            back();\r\n        }\r\n        saveMedications(() => {\r\n            const refresh = document.querySelector('#refresh_medications');\r\n            if (refresh != null) {\r\n                refresh.click();\r\n            }\r\n        });\r\n    }\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <ons-button modifier=\"quiet\" onClick={this.handleClick}>Save</ons-button>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport class NewMedicationItem extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        if (Object.keys(props.data).length !== 0) {\r\n            this.state = props.data;\r\n        } else {\r\n            this.state = {\r\n                medicationList: []\r\n            }\r\n        }\r\n\r\n        this.index = null;\r\n    }\r\n    componentDidMount() {\r\n        const save_new_medication = document.querySelector('div#save_new_medication');\r\n        if (save_new_medication != null) ReactDOM.render(<SaveMedications item=\"new\" />, save_new_medication);\r\n    }\r\n    handleChange = (index, date) => {\r\n        if (date != null) {\r\n            const formattedDate = formatDate(date);\r\n            this.setState(state => {\r\n                state.medicationList[index].date_started = formattedDate\r\n                return {\r\n                    medicationList: state.medicationList\r\n                }\r\n            });\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"content\">\r\n                    <ons-list>\r\n                        <div className=\"medication_list\">\r\n                            <MedicationForm value={this.state.medicationList[0]} index={0} medicationList={this.state.medicationList} onChangeCallback={this.handleChange} />\r\n                        </div>\r\n                        <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>\r\n                    </ons-list>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport class Medications extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        if (Object.keys(props.data).length !== 0) {\r\n            this.state = props.data;\r\n        } else {\r\n            this.state = {\r\n                medicationList: []\r\n            }\r\n        }\r\n\r\n        this.index = null;\r\n    }\r\n    removeMedication = (value) => {\r\n        if (value === 1) {\r\n            const id = this.index;\r\n            this.setState(state => {\r\n                const currentMedicationList = state.medicationList;\r\n                const filteredMedicationList = currentMedicationList.filter((item) => item.id !== \"_\" + id);\r\n                return {\r\n                    medicationList: filteredMedicationList.map((item, index) => {\r\n                        item.id = \"_\" + index;\r\n                        return item;\r\n                    })\r\n                }\r\n            }, () => { saveMedications(()=>{}, this.state) });\r\n        }\r\n    }\r\n    addMedication = (event) => {\r\n        const nav = document.querySelector('#navigator');\r\n        const medications_list_length = document.querySelectorAll('div.medication_list') ? document.querySelectorAll('div.medication_list').length : 0;\r\n        nav.pushPage('new_medication.html').then(() => {\r\n            const new_component = document.querySelector('#new_medication_component');\r\n            const initial_state = {\r\n                medicationList: [{\r\n                    id: \"_\" + medications_list_length,\r\n                    drug_name: \"\",\r\n                    dosage: \"\",\r\n                    purpose: \"\",\r\n                    date_started: \"\"\r\n                }]\r\n            };\r\n            ReactDOM.render(<NewMedicationItem data={initial_state} />, new_component);\r\n        });\r\n    }\r\n    confirm = (event) => {\r\n        this.index = event.target.getAttribute('index');\r\n        ons.notification.confirm('Are you sure you want to delete?').then(this.removeMedication);\r\n    }\r\n    handleChange = (index, date) => {\r\n        if (date != null) {\r\n            const formattedDate = formatDate(date);\r\n            this.setState(state => {\r\n                state.medicationList[index].date_started = formattedDate\r\n                return {\r\n                    medicationList: state.medicationList\r\n                }\r\n            });\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        const medications_saveBtn = document.querySelector('div#medications_saveBtn');\r\n        if (medications_saveBtn != null) ReactDOM.render(<SaveMedications />, medications_saveBtn);\r\n\r\n        const fab_add_medication = document.querySelector('#fab_add_medication');\r\n        if (fab_add_medication != null) {\r\n            fab_add_medication.addEventListener('click', this.addMedication);\r\n        }\r\n    }\r\n    refreshMedicationList = (data) => {\r\n        this.setState(data);\r\n    }\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"content\">\r\n                    <ons-list>\r\n                        {\r\n                            this.state.medicationList.map((value, index) =>\r\n                                <div className=\"medication_list\">\r\n                                    <ons-list-header style={{ backgroundColor: '#e6f2ff' }}>\r\n                                        <b>Medication/Supplement</b>\r\n                                        <div style={{ display: 'inline-block' }}>\r\n                                            <ons-button index={index} modifier=\"quiet\" onClick={this.confirm}>\r\n                                                <ons-icon index={index} icon=\"md-delete\"></ons-icon>\r\n                                            </ons-button>\r\n                                        </div>\r\n                                    </ons-list-header>\r\n                                    <MedicationForm value={value} index={index} medicationList={this.state.medicationList} onChangeCallback={this.handleChange} />\r\n                                </div>\r\n                            )\r\n                        }\r\n                    </ons-list>\r\n                </div>\r\n                <div id=\"refresh_medications\" onClick={(event)=>{ refreshMedications((data)=> {this.refreshMedicationList(data)}) }}></div>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nfunction refreshMedications(successCallBack=(data)=>{}) {\r\n    const config = {\r\n        \"url\": api.users_api_base_url + \"/v1/medications\",\r\n        \"method\": \"GET\",\r\n        \"timeout\": api.users_api_timeout,\r\n        \"headers\": {\r\n            \"Authorization\": api.users_api_authorization\r\n        },\r\n        \"params\": {\r\n            \"id\": cookies.get(login_cookie).email\r\n        }\r\n    };\r\n    callApi(config, successCallBack, 'medications');\r\n}\r\n\r\nfunction saveMedications(callBack=()=>{}, data=null) {\r\n    let medicationList = null;\r\n    if (data == null) {\r\n        const medicationCount = document.querySelectorAll('div.medication_list').length;\r\n        medicationList = [];\r\n        for (let i = 0; i < medicationCount; i++) {\r\n            const medication = {\r\n                id: \"_\" + i,\r\n                drug_name: document.querySelector('#drug_name_' + i).value,\r\n                dosage: document.querySelector('#dosage_' + i).value,\r\n                purpose: document.querySelector('#purpose_' + i).value,\r\n                date_started: document.querySelector('#date_started_' + i).value\r\n            }\r\n            medicationList.push(medication);\r\n        }\r\n    } else {\r\n        medicationList = data.medicationList;\r\n    }\r\n\r\n    if (medicationList != null) {\r\n        const payload = {\r\n            id: cookies.get(login_cookie).email,\r\n            medicationList: medicationList\r\n        }\r\n        const config = {\r\n            \"url\": api.users_api_base_url + \"/v1/medications\",\r\n            \"method\": \"POST\",\r\n            \"timeout\": 60000,\r\n            \"headers\": {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": api.users_api_authorization\r\n            },\r\n            \"data\": payload\r\n        };\r\n        callApi(config, (data) => {\r\n            showAlert(\"Successfully saved data\");\r\n            callBack();\r\n        }, 'medications');\r\n    }\r\n}\r\n\r\nexport class MedicationsProfile extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = props.data;\r\n\t}\r\n\trender() {\r\n        const medicationList = this.state.medicationList || [];\r\n\t\treturn (\r\n\t\t\t<ons-list>\r\n                <ons-list-header style={{ textAlign: 'center' }}>\r\n                    <ons-button modifier=\"quiet\" onClick={()=>{document.querySelector('#carousel').prev()}}><ons-icon icon=\"md-chevron-left\"></ons-icon></ons-button>\r\n                    Medications and Supplements\r\n\t\t\t\t\t<ons-button modifier=\"quiet\" onClick={()=>{document.querySelector('#carousel').next()}}><ons-icon icon=\"md-chevron-right\"></ons-icon></ons-button>\r\n\t\t\t\t</ons-list-header>\r\n                {\r\n                    medicationList.map((item, index) => {\r\n                        const bgcolor = index % 2 === 0 ? '#ffffff' : '#f2f2f2';\r\n                        return (\r\n                            <div style={{ backgroundColor: bgcolor }}>\r\n                                <ons-list-item>\r\n                                    <label className=\"profile\">Date Started</label>\r\n\t\t\t\t\t                <div>{_default(formatToDateString(item.date_started), \"--\")}</div>\r\n                                </ons-list-item>\r\n                                <ons-list-item>\r\n                                    <label className=\"profile\">Drug Name</label>\r\n\t\t\t\t\t                <div>{_default(item.drug_name, \"--\")}</div>\r\n                                </ons-list-item>\r\n                                <ons-list-item>\r\n                                    <label className=\"profile\">Dosage</label>\r\n\t\t\t\t\t                <div>{_default(item.dosage, \"--\")}</div>\r\n                                </ons-list-item>\r\n                                <ons-list-item>\r\n                                    <label className=\"profile\">Purpose</label>\r\n\t\t\t\t\t                <div>{_default(item.purpose, \"--\")}</div>\r\n                                </ons-list-item>\r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n\t\t\t</ons-list>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport DatePicker from 'react-date-picker';\r\nimport TimePicker from 'react-time-picker';\r\nimport { cookies, callApi, showAlert, formatDate, formatTime, back, formatToDateString, formatToTimeString, _default } from './index.js';\r\nimport { api, login_cookie } from './config.js';\r\nimport ons from 'onsenui';\r\n\r\nfunction VitalSignsForm(props) {\r\n    const id = props.vsList[props.index].id;\r\n    const bgcolor = props.index % 2 === 0 ? '#ffffff' : '#f0f0f5';\r\n    return (\r\n        <React.Fragment>\r\n            <div style={{ backgroundColor: bgcolor }}>\r\n                <ons-list-item>\r\n                    <label className=\"form\">Date</label>\r\n                    <ons-input id={\"vs_date\" + id} style={{ display: 'none' }} value={props.vsList[props.index].vs_date == null || props.vsList[props.index].vs_date.length === 0 ? formatDate(new Date()) : props.vsList[props.index].vs_date} ></ons-input>\r\n                    <DatePicker onChange={date => { props.onDateChangeCallback(props.index, date) }} value={props.vsList[props.index].vs_date == null || props.vsList[props.index].vs_date.length === 0 ? new Date() : new Date(props.vsList[props.index].vs_date)} clearIcon={null} />\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"form\">Time</label>\r\n                    <ons-input id={\"vs_time\" + id} style={{ display: 'none' }} value={props.vsList[props.index].vs_time == null || props.vsList[props.index].vs_time.length === 0 ? formatTime(new Date()) : props.vsList[props.index].vs_time} ></ons-input>\r\n                    <TimePicker onChange={time => { props.onTimeChangeCallback(props.index, time) }} value={props.vsList[props.index].vs_time == null || props.vsList[props.index].vs_time.length === 0 ? new Date() : props.vsList[props.index].vs_time + ':00'} clearIcon={null} />\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"form\">Blood Pressure</label>\r\n                    <ons-input id={\"vs_bloodpressure\" + id} modifier=\"material\" value={props.vsList[props.index].vs_bloodpressure}></ons-input>\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"form\">Heart Rate</label>\r\n                    <ons-input id={\"vs_heartrate\" + id} type=\"number\" modifier=\"material\" value={props.vsList[props.index].vs_heartrate}></ons-input>&nbsp;bpm\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"form\">Respiratory Rate</label>\r\n                    <ons-input id={\"vs_respirate\" + id} type=\"number\" modifier=\"material\" value={props.vsList[props.index].vs_respirate}></ons-input>&nbsp;cpm\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"form\">Temperature</label>\r\n                    <ons-input id={\"vs_temp\" + id} type=\"number\" modifier=\"material\" value={props.vsList[props.index].vs_temp}></ons-input>&nbsp;Celsius\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"form\">Weight</label>\r\n                    <ons-input id={\"vs_weight\" + id} type=\"number\" modifier=\"material\" value={props.vsList[props.index].vs_weight}></ons-input>&nbsp;\r\n                    { props.vsList[props.index].vs_weight_unit === \"kg\" ? <ons-radio name={\"vs_weight_unit\" + id} input-id=\"weight_kg\" value=\"kg\" checked>kg</ons-radio> : <ons-radio name={\"vs_weight_unit\" + id} input-id=\"weight_kg\" value=\"kg\">kg</ons-radio> }&nbsp; \r\n                    { props.vsList[props.index].vs_weight_unit === \"lbs\" ? <ons-radio name={\"vs_weight_unit\" + id} input-id=\"weight_lbs\" value=\"lbs\" checked>lbs</ons-radio> : <ons-radio name={\"vs_weight_unit\" + id} input-id=\"weight_lbs\" value=\"lbs\">lbs</ons-radio> }\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"form\">Height</label>\r\n                    <ons-input id={\"vs_height\" + id} type=\"number\" modifier=\"material\" value={props.vsList[props.index].vs_height}></ons-input>&nbsp;cm\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"form\">Body Mass Index</label>\r\n                    <ons-input id={\"vs_bmi\" + id} type=\"number\" modifier=\"material\" value={props.vsList[props.index].vs_bmi}></ons-input>\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"form\">Waist Circumference</label>\r\n                    <ons-input id={\"vs_waistcirc\" + id} type=\"number\" modifier=\"material\" value={props.vsList[props.index].vs_waistcirc}></ons-input>&nbsp;cm\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"form\">Hip Circumference</label>\r\n                    <ons-input id={\"vs_hipcirc\" + id} type=\"number\" modifier=\"material\" value={props.vsList[props.index].vs_hipcirc}></ons-input>&nbsp;cm\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"form\">Waist/Hip Ratio</label>\r\n                    <ons-input id={\"vs_whratio\" + id} modifier=\"material\" value={props.vsList[props.index].vs_whratio}></ons-input>\r\n                </ons-list-item>\r\n            </div>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport class SaveVitalSigns extends React.Component {\r\n    handleClick = (event) => {\r\n        saveVitalSigns(() => {\r\n            if (this.props.item != null && this.props.item === 'new') {\r\n                back();\r\n            }\r\n            const refresh = document.querySelector('#refresh_vitalsigns');\r\n            if (refresh != null) {\r\n                refresh.click();\r\n            }\r\n        });\r\n    }\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <ons-button modifier=\"quiet\" onClick={this.handleClick}>Save</ons-button>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport class NewVitalSignItem extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        if (Object.keys(props.data).length !== 0) {\r\n            this.state = props.data;\r\n        } else {\r\n            this.state = {\r\n                vsList: []\r\n            }\r\n        }\r\n\r\n        this.index = null;\r\n    }\r\n    componentDidMount() {\r\n        const save_new_vs = document.querySelector('div#save_new_vs');\r\n        if (save_new_vs != null) ReactDOM.render(<SaveVitalSigns item=\"new\" />, save_new_vs);\r\n    }\r\n    handleDateChange = (index, date) => {\r\n        if (date != null) {\r\n            const formattedDate = formatDate(date);\r\n            this.setState(state => {\r\n                state.vsList[index].vs_date = formattedDate\r\n                return {\r\n                    vsList: state.vsList\r\n                }\r\n            });\r\n        }\r\n    }\r\n    handleTimeChange = (index, time) => {\r\n        if (time != null) {\r\n            this.setState(state => {\r\n                state.vsList[index].vs_time = time\r\n                return {\r\n                    vsList: state.vsList\r\n                }\r\n            });\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"content\">\r\n                    <ons-list>\r\n                        <div className=\"vs_list\">\r\n                            <VitalSignsForm value={this.state.vsList[0]} index={0} vsList={this.state.vsList} onDateChangeCallback={this.handleDateChange} onTimeChangeCallback={this.handleTimeChange} />\r\n                        </div>\r\n                    </ons-list>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport class VitalSigns extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        if (Object.keys(props.data).length !== 0) {\r\n            this.state = props.data;\r\n        } else {\r\n            this.state = {\r\n                vsList: []\r\n            }\r\n        }\r\n\r\n        this.index = null;\r\n    }\r\n    removeVitalSign = (value) => {\r\n        if (value === 1) {\r\n            const id = this.index;\r\n            this.setState(state => {\r\n                const currentVSList = state.vsList;\r\n                const filteredVSList = currentVSList.filter((item) => item.id !== \"_\" + id);\r\n                return {\r\n                    vsList: filteredVSList.map((item, index) => {\r\n                        item.id = \"_\" + index;\r\n                        return item;\r\n                    })\r\n                }\r\n            }, () => { saveVitalSigns(()=>{}, this.state) });\r\n        }\r\n    }\r\n    addVitalSign = (event) => {\r\n        const nav = document.querySelector('#navigator');\r\n        const vs_list_length = document.querySelectorAll('div.vs_list') ? document.querySelectorAll('div.vs_list').length : 0;\r\n        nav.pushPage('new_vitalsign.html').then(() => {\r\n            const new_component = document.querySelector('#new_vs_component');\r\n            const initial_state = {\r\n                vsList: [{\r\n                    id: \"_\" + vs_list_length,\r\n                    vs_date: \"\",\r\n                    vs_time: \"\",\r\n                    vs_bloodpressure: \"\",\r\n                    vs_heartrate: \"\",\r\n                    vs_respirate: \"\",\r\n                    vs_temp: \"\",\r\n                    vs_weight: \"\",\r\n                    vs_weight_unit: \"\",\r\n                    vs_height: \"\",\r\n                    vs_bmi: \"\",\r\n                    vs_waistcirc: \"\",\r\n                    vs_hipcirc: \"\",\r\n                    vs_whratio: \"\"\r\n                }]\r\n            };\r\n            ReactDOM.render(<NewVitalSignItem data={initial_state} />, new_component);\r\n        });\r\n    }\r\n    confirm = (event) => {\r\n        this.index = event.target.getAttribute('index');\r\n        ons.notification.confirm('Are you sure you want to delete?').then(this.removeVitalSign);\r\n    }\r\n    handleDateChange = (index, date) => {\r\n        if (date != null) {\r\n            const formattedDate = formatDate(date);\r\n            this.setState(state => {\r\n                state.vsList[index].vs_date = formattedDate\r\n                return {\r\n                    vsList: state.vsList\r\n                }\r\n            });\r\n        }\r\n    }\r\n    handleTimeChange = (index, time) => {\r\n        if (time != null) {\r\n            this.setState(state => {\r\n                state.vsList[index].vs_time = time\r\n                return {\r\n                    vsList: state.vsList\r\n                }\r\n            });\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        const vitalsigns_saveBtn = document.querySelector('div#vitalsigns_saveBtn');\r\n        if (vitalsigns_saveBtn != null) ReactDOM.render(<SaveVitalSigns />, vitalsigns_saveBtn);\r\n\r\n        const fab_add_vitalsign = document.querySelector('#fab_add_vitalsign');\r\n        if (fab_add_vitalsign != null) {\r\n            fab_add_vitalsign.addEventListener('click', this.addVitalSign);\r\n        }\r\n    }\r\n    handleChangeState = (event) => {\r\n        if (event.type === 'changestate' || event.state === \"action\") {\r\n            refreshVitalSigns(this.refreshVSList);\r\n        }\r\n    }\r\n    refreshVSList = (data) => {\r\n        this.setState(data);\r\n    }\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"content\">\r\n                    <ons-list>\r\n                        {\r\n                            this.state.vsList.map((value, index) =>\r\n                                <div className=\"vs_list\">\r\n                                    <ons-list-header style={{ backgroundColor: '#e6f2ff' }}>\r\n                                        <b>Enter the details</b>\r\n                                        <div style={{ display: 'inline-block' }}>\r\n                                            <ons-button index={index} modifier=\"quiet\" onClick={this.confirm}>\r\n                                                <ons-icon index={index} icon=\"md-delete\"></ons-icon>\r\n                                            </ons-button>\r\n                                        </div>\r\n                                    </ons-list-header>\r\n                                    <VitalSignsForm value={value} index={index} vsList={this.state.vsList} onDateChangeCallback={this.handleDateChange} onTimeChangeCallback={this.handleTimeChange} />\r\n                                </div>\r\n                            )\r\n                        }\r\n                    </ons-list>\r\n                </div>\r\n                <div id=\"refresh_vitalsigns\" onClick={(event)=>{ refreshVitalSigns((data)=> {this.refreshVSList(data)}) }}></div>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nfunction refreshVitalSigns(successCallBack) {\r\n    const config = {\r\n        \"url\": api.users_api_base_url + \"/v1/vitalSigns\",\r\n        \"method\": \"GET\",\r\n        \"timeout\": api.users_api_timeout,\r\n        \"headers\": {\r\n            \"Authorization\": api.users_api_authorization,\r\n            \"JWT\": cookies.get(login_cookie).access_token\r\n        },\r\n        \"params\": {\r\n            \"id\": cookies.get(login_cookie).email\r\n        }\r\n    };\r\n    callApi(config, successCallBack, 'vitalsigns');\r\n}\r\n\r\nfunction saveVitalSigns(callBack = () => {}, data = null) {\r\n    let vsList = null;\r\n    if (data == null) {\r\n        const vsCount = document.querySelectorAll('div.vs_list').length;\r\n        vsList = [];\r\n        for (let i = 0; i < vsCount; i++) {\r\n            const vs = {\r\n                id: \"_\" + i,\r\n                vs_date: document.querySelector('#vs_date_' + i).value,\r\n                vs_time: document.querySelector('#vs_time_' + i).value,\r\n                vs_bloodpressure: document.querySelector('#vs_bloodpressure_' + i).value,\r\n                vs_heartrate: document.querySelector('#vs_heartrate_' + i).value,\r\n                vs_respirate: document.querySelector('#vs_respirate_' + i).value,\r\n                vs_temp: document.querySelector('#vs_temp_' + i).value,\r\n                vs_weight: document.querySelector('#vs_weight_' + i).value,\r\n                vs_weight_unit: document.querySelector('input[name=vs_weight_unit_' + i + ']:checked') ? document.querySelector('input[name=vs_weight_unit_' + i + ']:checked').value : \"\",\r\n                vs_height: document.querySelector('#vs_height_' + i).value,\r\n                vs_bmi: document.querySelector('#vs_bmi_' + i).value,\r\n                vs_waistcirc: document.querySelector('#vs_waistcirc_' + i).value,\r\n                vs_hipcirc: document.querySelector('#vs_hipcirc_' + i).value,\r\n                vs_whratio: document.querySelector('#vs_whratio_' + i).value\r\n            }\r\n            vsList.push(vs);\r\n        }\r\n    } else {\r\n        vsList = data.vsList;\r\n    }\r\n\r\n    if (vsList != null) {\r\n        const payload = {\r\n            id: cookies.get(login_cookie).email,\r\n            vsList: vsList\r\n        }\r\n        const config = {\r\n            \"url\": api.users_api_base_url + \"/v1/vitalSigns\",\r\n            \"method\": \"POST\",\r\n            \"timeout\": 60000,\r\n            \"headers\": {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": api.users_api_authorization,\r\n                \"JWT\": cookies.get(login_cookie).access_token\r\n            },\r\n            \"data\": payload\r\n        };\r\n        callApi(config, (data) => {\r\n            showAlert(\"Successfully saved data\");\r\n            callBack();\r\n        }, 'vitalsigns');\r\n    }\r\n}\r\n\r\nexport class VitalSignsProfile extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = props.data;\r\n\t}\r\n\trender() {\r\n        const vsList = this.state.vsList || [];\r\n\t\treturn (\r\n\t\t\t<ons-list>\r\n\t\t\t\t<ons-list-header style={{ textAlign: 'center' }}>\r\n                    <ons-button modifier=\"quiet\" onClick={()=>{document.querySelector('#carousel').prev()}}><ons-icon icon=\"md-chevron-left\"></ons-icon></ons-button>\r\n                    Vital Signs\r\n\t\t\t\t\t<ons-button modifier=\"quiet\" onClick={()=>{document.querySelector('#carousel').next()}}><ons-icon icon=\"md-chevron-right\"></ons-icon></ons-button>\r\n\t\t\t\t</ons-list-header>\r\n                {\r\n                    vsList.map((item, index) => {\r\n                        const bgcolor = index % 2 === 0 ? '#ffffff' : '#f2f2f2';\r\n                        return (\r\n                            <div style={{ backgroundColor: bgcolor }}>\r\n                                <ons-list-item>\r\n                                    <label className=\"profile\">Date</label>\r\n\t\t\t\t\t                <div>{_default(formatToDateString(item.vs_date), \"--\")}</div>\r\n                                </ons-list-item>\r\n                                <ons-list-item>\r\n                                    <label className=\"profile\">Time</label>\r\n\t\t\t\t\t                <div>{_default(formatToTimeString(item.vs_time), \"--\")}</div>\r\n                                </ons-list-item>\r\n                                <ons-list-item>\r\n                                    <label className=\"profile\">Blood Pressure</label>\r\n\t\t\t\t\t                <div>{_default(item.vs_bloodpressure, \"--\")}</div>\r\n                                </ons-list-item>\r\n                                <ons-list-item>\r\n                                    <label className=\"profile\">Heart Rate (bpm)</label>\r\n\t\t\t\t\t                <div>{_default(item.vs_heartrate, \"--\")}</div>\r\n                                </ons-list-item>\r\n                                <ons-list-item>\r\n                                    <label className=\"profile\">Respiratory Rate (cpm)</label>\r\n\t\t\t\t\t                <div>{_default(item.vs_respirate, \"--\")}</div>\r\n                                </ons-list-item>\r\n                                <ons-list-item>\r\n                                    <label className=\"profile\">Temperature (Celsius)</label>\r\n\t\t\t\t\t                <div>{_default(item.vs_temp, \"--\")}</div>\r\n                                </ons-list-item>\r\n                                <ons-list-item>\r\n                                    <label className=\"profile\">Weight ({item.vs_weight_unit})</label>\r\n\t\t\t\t\t                <div>{_default(item.vs_weight, \"--\")}</div>\r\n                                </ons-list-item>\r\n                                <ons-list-item>\r\n                                    <label className=\"profile\">Height (cm)</label>\r\n\t\t\t\t\t                <div>{_default(item.vs_height, \"--\")}</div>\r\n                                </ons-list-item>\r\n                                <ons-list-item>\r\n                                    <label className=\"profile\">Body Mass Index</label>\r\n\t\t\t\t\t                <div>{_default(item.vs_bmi, \"--\")}</div>\r\n                                </ons-list-item>\r\n                                <ons-list-item>\r\n                                    <label className=\"profile\">Waist Circumference (cm)</label>\r\n\t\t\t\t\t                <div>{_default(item.vs_waistcirc, \"--\")}</div>\r\n                                </ons-list-item>\r\n                                <ons-list-item>\r\n                                    <label className=\"profile\">Hip Circumference (cm)</label>\r\n\t\t\t\t\t                <div>{_default(item.vs_hipcirc, \"--\")}</div>\r\n                                </ons-list-item>\r\n                                <ons-list-item>\r\n                                    <label className=\"profile\">Waist/Hip Ratio</label>\r\n\t\t\t\t\t                <div>{_default(item.vs_whratio, \"--\")}</div>\r\n                                </ons-list-item>\r\n                            </div>\r\n                        )\r\n                    })\r\n                }\r\n\t\t\t</ons-list>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { diet_list, api, login_cookie } from './config.js';\r\nimport { cookies, callApi, showAlert, _default } from './index.js';\r\n\r\nfunction DietForm(props) {\r\n    return(\r\n        <React.Fragment>\r\n            <ons-list>\r\n                    <ons-list-header><b>Expand the item to specify the quantity</b></ons-list-header>\r\n                    {\r\n                        props.data.dietList.map((value, index) =>\r\n                            <ons-list-item key={value.displayText} expandable>  \r\n                                {value.displayText}\r\n                                <div className=\"expandable-content\">\r\n                                    <ons-input id={value.id+\"_qty\"} type=\"number\" modifier=\"material\" placeholder=\"Quantity\" style={{width: '100px'}} value={value.quantity}></ons-input>\r\n                                    <br/>\r\n                                    <ons-select id={value.id+\"_unit\"} modifier=\"material\" selectedIndex={value.unit_selected} ref={ref=>{props.unitRef[index]=ref}}>\r\n                                        <option value=\"serve\">serve</option>\r\n                                        <option value=\"cup\">cup</option>\r\n                                        <option value=\"cup raw\">cup raw</option>\r\n                                        <option value=\"cup cooked\">cup cooked</option>\r\n                                        <option value=\"tbsp\">tbsp</option>\r\n                                        <option value=\"handful\">handful</option>\r\n                                        <option value=\"glass\">glass</option>\r\n                                        <option value=\"piece\">piece</option>\r\n                                        <option value=\"pack\">pack</option>\r\n                                    </ons-select>\r\n                                </div>\r\n                            </ons-list-item>              \r\n                        )\r\n                    }\r\n                </ons-list>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport class SaveDiet extends React.Component {\r\n\thandleClick = (event) => {\r\n        const dietList = diet_list.map((item) => {\r\n            const quantity_dom = document.querySelector('#'+item.id+'_qty');\r\n            const unit_dom = document.querySelector('#'+item.id+'_unit');\r\n            let quantity, unit, unit_selected;\r\n            if (quantity_dom != null) {\r\n                quantity = quantity_dom.value;\r\n            }\r\n            if (unit_dom != null) {\r\n                unit = unit_dom.value;\r\n                unit_selected = unit_dom.selectedIndex; \r\n            }\r\n            return {\r\n                displayText: item.displayText,\r\n                id: item.id,\r\n                quantity: quantity,\r\n                unit: unit,\r\n                unit_selected: unit_selected\r\n            }\r\n        });\r\n\t\tconst payload = {\r\n            id: cookies.get(login_cookie).email,\r\n            dietList: dietList\r\n        };\r\n\t\tconst config = {\r\n\t\t\t\"url\": api.users_api_base_url + \"/v1/diet\",\r\n\t\t\t\"method\": \"POST\",\r\n\t\t\t\"timeout\": api.users_api_timeout,\r\n\t\t\t\"headers\": {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n                \"Authorization\": api.users_api_authorization\r\n\t\t\t},\r\n\t\t\t\"data\": payload\r\n\t\t};\r\n\t\tcallApi(config, (data) => {\r\n\t\t\tshowAlert(\"Successfully saved data\");\r\n\t\t}, 'diet');\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ons-button modifier=\"quiet\" onClick={this.handleClick}>Save</ons-button>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport class Diet extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        if (Object.keys(props.data).length !== 0) {\r\n            this.state = props.data;\r\n        } else {\r\n            this.state = {\r\n                dietList: diet_list\r\n            }\r\n        }\r\n\r\n        this.unit = [];\r\n    }\r\n    componentDidMount() {\r\n        const diet_saveBtn = document.querySelector('div#diet_saveBtn');\r\n        if (diet_saveBtn != null) ReactDOM.render(<SaveDiet />, diet_saveBtn);\r\n\r\n        this.state.dietList.forEach((item, index) => {\r\n            this.unit[index].selectedIndex = item.unit_selected;\r\n        });\r\n    }\r\n    render() {\r\n        return (\r\n            <DietForm data={this.state} unitRef={this.unit}/>\r\n        );\r\n    }\r\n}\r\n\r\nexport class DietProfile extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = props.data;\r\n\t}\r\n\trender() {\r\n        const dietList = this.state.dietList || [];\r\n\t\treturn (\r\n\t\t\t<ons-list>\r\n\t\t\t\t<ons-list-header style={{ textAlign: 'center' }}>\r\n                    <ons-button modifier=\"quiet\" onClick={()=>{document.querySelector('#carousel').prev()}}><ons-icon icon=\"md-chevron-left\"></ons-icon></ons-button>\r\n                    Diet\r\n\t\t\t\t\t<ons-button modifier=\"quiet\" onClick={()=>{document.querySelector('#carousel').next()}}><ons-icon icon=\"md-chevron-right\"></ons-icon></ons-button>\r\n\t\t\t\t</ons-list-header>\r\n                {\r\n                    dietList.map((item) => {\r\n                        return (\r\n                            <ons-list-item>\r\n                                <label className=\"profile\">{item.displayText}</label>\r\n                                <div>{_default(item.quantity, \"--\")} {item.unit}</div>\r\n                            </ons-list-item>\r\n                        )\r\n                    })\r\n                }\r\n\t\t\t</ons-list>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { callApi, showAlert, cookies, _default } from './index.js';\r\nimport { api, tobacco_use_0_options, emotional_being_options, login_cookie } from './config.js';\r\n\r\nfunction OtherForm(props) {\r\n    return (\r\n        <React.Fragment>\r\n            <ons-list>\r\n                <ons-list-header><b>Expand the item to answer the question</b></ons-list-header>\r\n                <ons-list-item><ons-list-header>Physical Activity</ons-list-header></ons-list-item>\r\n                <ons-list-item expandable>\r\n                    How many days a week do you engage in moderate to strenuous exercise, such as brisk walking?\r\n                    <div className=\"expandable-content\">\r\n                        <ons-input id=\"physical_activity_0\" type=\"number\" modifier=\"material\" placeholder=\"Days\" style={{ width: '100px' }} value={props.data.physical_activity_0}></ons-input>\r\n                    </div>\r\n                </ons-list-item>\r\n                <ons-list-item expandable>\r\n                    On average, how many minutes per day do you exercise at this level?\r\n                    <div className=\"expandable-content\">\r\n                        <ons-input id=\"physical_activity_1\" type=\"number\" modifier=\"material\" placeholder=\"Minutes\" style={{ width: '100px' }} value={props.data.physical_activity_1}></ons-input>\r\n                    </div>\r\n                </ons-list-item>\r\n                <ons-list-item expandable>\r\n                    Total minutes of moderate to strenuous physical activity per week:\r\n                    <div className=\"expandable-content\">\r\n                        <ons-input id=\"physical_activity_2\" type=\"number\" modifier=\"material\" placeholder=\"Minutes\" style={{ width: '100px' }} value={props.data.physical_activity_2}></ons-input>\r\n                    </div>\r\n                </ons-list-item>\r\n                <ons-list-item><ons-list-header>Sleep</ons-list-header></ons-list-item>\r\n                <ons-list-item expandable>\r\n                    Typical weekday hours of sleep\r\n                    <div className=\"expandable-content\">\r\n                        <ons-input id=\"sleep_0\" type=\"number\" modifier=\"material\" placeholder=\"Hours\" style={{ width: '100px' }} value={props.data.sleep_0}></ons-input>\r\n                    </div>\r\n                </ons-list-item>\r\n                <ons-list-item expandable>\r\n                    Typical weekend hours of sleep\r\n                    <div className=\"expandable-content\">\r\n                        <ons-input id=\"sleep_1\" type=\"number\" modifier=\"material\" placeholder=\"Hours\" style={{ width: '100px' }} value={props.data.sleep_1}></ons-input>\r\n                    </div>\r\n                </ons-list-item>\r\n                <ons-list-item expandable>\r\n                    Quality of sleep\r\n                    <div className=\"expandable-content\">\r\n                        <ons-input id=\"sleep_2\" modifier=\"material\" placeholder=\"Quality\" style={{ width: '100px' }} value={props.data.sleep_2}></ons-input>\r\n                    </div>\r\n                </ons-list-item>\r\n                <ons-list-item><ons-list-header>Tobacco Use</ons-list-header></ons-list-item>\r\n                <ons-list-item expandable>\r\n                    <div>\r\n                        <ons-select id=\"tobacco_use_0\" modifier=\"material\" style={{ float: 'left' }} ref={props.tobacco_use_0}>\r\n                            <option value=\"Non smoker\">Non smoker</option>\r\n                            <option value=\"Current smoker\">Current smoker</option>\r\n                            <option value=\"Past smoker\">Past smoker</option>\r\n                        </ons-select>\r\n                    </div>\r\n                    <div className=\"expandable-content\">\r\n                        <ons-input id=\"tobacco_use_1\" type=\"number\" modifier=\"material\" placeholder=\"# of sticks/day\" style={{ width: '120px' }} value={props.data.tobacco_use_1}></ons-input>&nbsp;sticks/day<br />\r\n                        <ons-input id=\"tobacco_use_2\" type=\"number\" modifier=\"material\" placeholder=\"# of years\" style={{ width: '120px' }} value={props.data.tobacco_use_2}></ons-input>&nbsp;years<br />\r\n                        <ons-input id=\"tobacco_use_3\" type=\"number\" modifier=\"material\" placeholder=\"pack/year\" style={{ width: '120px' }} value={props.data.tobacco_use_3}></ons-input>&nbsp;pack/year\r\n                    </div>\r\n                </ons-list-item>\r\n                <ons-list-item><ons-list-header>Alcohol Use</ons-list-header></ons-list-item>\r\n                <ons-list-item expandable>\r\n                    How many drinks do you consume in any day?\r\n                    <div className=\"expandable-content\">\r\n                        <ons-input id=\"alcohol_use_0\" type=\"number\" modifier=\"material\" placeholder=\"Quantity\" style={{ width: '100px' }} value={props.data.alcohol_use_0}></ons-input>\r\n                    </div>\r\n                </ons-list-item>\r\n                <ons-list-item expandable>\r\n                    How many drinks do you consume in a week?\r\n                    <div className=\"expandable-content\">\r\n                        <ons-input id=\"alcohol_use_1\" type=\"number\" modifier=\"material\" placeholder=\"Quantity\" style={{ width: '100px' }} value={props.data.alcohol_use_1}></ons-input>\r\n                    </div>\r\n                </ons-list-item>\r\n                <ons-list-item><ons-list-header>Emotional Being</ons-list-header></ons-list-item>\r\n                <ons-list-item expandable>\r\n                    In most ways, my life is close to my ideal.\r\n                    <div className=\"expandable-content\">\r\n                        <div>\r\n                            <ons-select id=\"emotional_being_0\" modifier=\"material\" style={{ float: 'left' }} ref={props.emotional_being_0}>\r\n                                <option value=\"5\">5</option>\r\n                                <option value=\"4\">4</option>\r\n                                <option value=\"3\">3</option>\r\n                                <option value=\"2\">2</option>\r\n                                <option value=\"1\">1</option>\r\n                            </ons-select>\r\n                        </div>\r\n                    </div>\r\n                </ons-list-item>\r\n                <ons-list-item expandable>\r\n                    I am satisfied with my life.\r\n                    <div className=\"expandable-content\">\r\n                        <div>\r\n                            <ons-select id=\"emotional_being_1\" modifier=\"material\" style={{ float: 'left' }} ref={props.emotional_being_1}>\r\n                                <option value=\"5\">5</option>\r\n                                <option value=\"4\">4</option>\r\n                                <option value=\"3\">3</option>\r\n                                <option value=\"2\">2</option>\r\n                                <option value=\"1\">1</option>\r\n                            </ons-select>\r\n                        </div>\r\n                    </div>\r\n                </ons-list-item>\r\n            </ons-list>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport class SaveOthers extends React.Component {\r\n    handleClick = (event) => {\r\n\t\tconst payload = {\r\n            id: cookies.get(login_cookie).email,\r\n            physical_activity_0: document.querySelector('#physical_activity_0').value,\r\n            physical_activity_1: document.querySelector('#physical_activity_1').value,\r\n            physical_activity_2: document.querySelector('#physical_activity_2').value,\r\n            sleep_0: document.querySelector('#sleep_0').value,\r\n            sleep_1: document.querySelector('#sleep_1').value,\r\n            sleep_2: document.querySelector('#sleep_2').value,\r\n            tobacco_use_0: document.querySelector('#tobacco_use_0').selectedIndex,\r\n            tobacco_use_1: document.querySelector('#tobacco_use_1').value,\r\n            tobacco_use_2: document.querySelector('#tobacco_use_2').value,\r\n            tobacco_use_3: document.querySelector('#tobacco_use_3').value,\r\n            alcohol_use_0: document.querySelector('#alcohol_use_0').value,\r\n            alcohol_use_1: document.querySelector('#alcohol_use_1').value,\r\n            emotional_being_0: document.querySelector('#emotional_being_0').selectedIndex,\r\n            emotional_being_1: document.querySelector('#emotional_being_1').selectedIndex\r\n        };\r\n\t\tconst config = {\r\n\t\t\t\"url\": api.users_api_base_url + \"/v1/others\",\r\n\t\t\t\"method\": \"POST\",\r\n\t\t\t\"timeout\": api.users_api_timeout,\r\n\t\t\t\"headers\": {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n                \"Authorization\": api.users_api_authorization\r\n\t\t\t},\r\n\t\t\t\"data\": payload\r\n\t\t};\r\n\t\tcallApi(config, (data) => {\r\n\t\t\tshowAlert(\"Successfully saved data\");\r\n\t\t}, 'others');\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ons-button modifier=\"quiet\" onClick={this.handleClick}>Save</ons-button>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport class Others extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        if (Object.keys(props.data).length !== 0) {\r\n            this.state = props.data;\r\n        } else {\r\n            this.state = {};\r\n        }\r\n\r\n        this.tobacco_use_0 = React.createRef();\r\n        this.emotional_being_0 = React.createRef();\r\n        this.emotional_being_1 = React.createRef();\r\n    }\r\n    componentDidMount() {\r\n        const others_saveBtn = document.querySelector('div#others_saveBtn');\r\n        if (others_saveBtn != null) ReactDOM.render(<SaveOthers />, others_saveBtn);\r\n\r\n        this.tobacco_use_0.current.selectedIndex = this.state.tobacco_use_0;\r\n        this.emotional_being_0.current.selectedIndex = this.state.emotional_being_0;\r\n        this.emotional_being_1.current.selectedIndex = this.state.emotional_being_1;\r\n    }\r\n    render() {\r\n        return (\r\n            <OtherForm data={this.state} tobacco_use_0={this.tobacco_use_0} emotional_being_0={this.emotional_being_0} emotional_being_1={this.emotional_being_1} />\r\n        );\r\n    }\r\n}\r\n\r\nexport class OthersProfile extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = props.data;\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ons-list>\r\n                <ons-list-header style={{ textAlign: 'center' }}>\r\n                    <ons-button modifier=\"quiet\" onClick={()=>{document.querySelector('#carousel').prev()}}><ons-icon icon=\"md-chevron-left\"></ons-icon></ons-button>\r\n                    Others\r\n\t\t\t\t</ons-list-header>\r\n\t\t\t\t<ons-list-header>Physical Activity</ons-list-header>\r\n                <ons-list-item>\r\n                    <label className=\"profile\">Days a week that are engaged in moderate to strenuous exercise, such as brisk walking</label>\r\n                    <div>{_default(this.state.physical_activity_0, \"--\")} days</div>\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"profile\">Average minutes per day of exercise at this level</label>\r\n                    <div>{_default(this.state.physical_activity_1, \"--\")} minutes</div>\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"profile\">Total minutes of moderate to strenuous physical activity per week</label>\r\n                    <div>{_default(this.state.physical_activity_2, \"--\")} minutes</div>\r\n                </ons-list-item>\r\n                <ons-list-header>Sleep</ons-list-header>\r\n                <ons-list-item>\r\n                    <label className=\"profile\">Typical weekday hours of sleep</label>\r\n                    <div>{_default(this.state.sleep_0, \"--\")} hours</div>\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"profile\">Typical weekend hours of sleep</label>\r\n                    <div>{_default(this.state.sleep_1, \"--\")} hours</div>\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"profile\">Quality of sleep</label>\r\n                    <div>{_default(this.state.sleep_2, \"--\")}</div>\r\n                </ons-list-item>\r\n                <ons-list-header>Tobacco Use</ons-list-header>\r\n                <ons-list-item>\r\n                    <div>{_default(tobacco_use_0_options[this.state.tobacco_use_0], \"--\")}</div>\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"profile\">Number of sticks per day</label>\r\n                    <div>{_default(this.state.tobacco_use_1, \"--\")}</div>\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"profile\">Number of years</label>\r\n                    <div>{_default(this.state.tobacco_use_2, \"--\")}</div>\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"profile\">Pack per year</label>\r\n                    <div>{_default(this.state.tobacco_use_3, \"--\")}</div>\r\n                </ons-list-item>\r\n                <ons-list-header>Alcohol Use</ons-list-header>\r\n                <ons-list-item>\r\n                    <label className=\"profile\">Number of drinks consumed in any day</label>\r\n                    <div>{_default(this.state.alcohol_use_0, \"--\")}</div>\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"profile\">Number of drinks consumed in a week</label>\r\n                    <div>{_default(this.state.alcohol_use_1, \"--\")}</div>\r\n                </ons-list-item>\r\n                <ons-list-header>Emotional Being</ons-list-header>\r\n                <ons-list-item>\r\n                    <label className=\"profile\">In most ways, life is close to ideal</label>\r\n                    <div>{_default(emotional_being_options[this.state.emotional_being_0], \"--\")}</div>\r\n                </ons-list-item>\r\n                <ons-list-item>\r\n                    <label className=\"profile\">Satisfied with life</label>\r\n                    <div>{_default(emotional_being_options[this.state.emotional_being_1], \"--\")}</div>\r\n                </ons-list-item>\r\n\t\t\t</ons-list>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { openMenu } from './home';\r\nimport { Calendar, momentLocalizer } from 'react-big-calendar';\r\nimport moment from 'moment';\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\r\nimport \"react-big-calendar/lib/addons/dragAndDrop/styles.css\";\r\nimport withDragAndDrop from \"react-big-calendar/lib/addons/dragAndDrop\";\r\n\r\nexport class Appointment extends React.Component {\r\n    state = {\r\n        myEventsList: [\r\n            {\r\n                title: \"Select\",\r\n                start: moment().toDate(),\r\n                end: moment().add(30, \"minute\").toDate()\r\n            }\r\n        ]\r\n    }\r\n    handleEventDrop = (data) => {\r\n        \r\n    }\r\n    handleEventResize = (data) => {\r\n        this.setState(state => {\r\n            const lastEvent = state.myEventsList[state.myEventsList.length-1];\r\n            lastEvent.start = data.start;\r\n            lastEvent.end = data.end;\r\n        });\r\n    }\r\n    componentDidMount() {\r\n        const DnDCalendar = withDragAndDrop(Calendar);\r\n        const localizer = momentLocalizer(moment);\r\n        \r\n        setTimeout(() => {\r\n            const appointment_calendar = document.querySelector('#appointment_calendar');\r\n            ReactDOM.render(<DnDCalendar\r\n                localizer={localizer}\r\n                events={this.state.myEventsList}\r\n                startAccessor=\"start\"\r\n                endAccessor=\"end\"\r\n                defaultView=\"day\"\r\n                views={[\"day\"]}\r\n                scrollToTime={new Date()}\r\n                selectable={false}\r\n                resizable={true}\r\n                step={30}\r\n                timeslots={1}\r\n                onEventDrop={this.handleEventDrop}\r\n                onEventResize={this.handleEventResize}\r\n            />, appointment_calendar);\r\n        }, 500);\r\n\r\n    }\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <ons-toolbar>\r\n                    <div className=\"left\">\r\n                        <ons-toolbar-button onClick={openMenu}>\r\n                            <ons-icon icon=\"md-menu\"></ons-icon>\r\n                        </ons-toolbar-button>\r\n                    </div>\r\n                    <div className=\"center\">\r\n                        My Appointments\r\n                    </div>\r\n                    <div className=\"right\">\r\n                        <ons-button modifier=\"quiet\">Save</ons-button>\r\n                    </div>\r\n                </ons-toolbar>\r\n                <ons-tabbar position=\"bottom\">\r\n                    <ons-tab label=\"Schedule\" icon=\"fa-tasks\" page=\"set_appointment.html\"></ons-tab>\r\n                    <ons-tab label=\"History\" icon=\"fa-history\" page=\"set_appointment.html\"></ons-tab>\r\n                </ons-tabbar>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { logout, back, createAccount, login, register, cookies, callApi, _default, showAlert, validatePasswords } from './index.js'\r\nimport { Users } from './users.js'\r\nimport { BasicInfo, BasicInfoProfile } from './basicinfo.js';\r\nimport { Illnesses, IllnessesProfile } from './illnesses.js';\r\nimport { Medications, MedicationsProfile } from './medications.js';\r\nimport { VitalSigns, VitalSignsProfile } from './vitalsigns.js';\r\nimport { Diet, DietProfile } from './diet.js';\r\nimport { Others, OthersProfile } from './others.js';\r\nimport { api, defaultImg, login_cookie, defaultEmailSender } from './config.js';\r\nimport ReactCrop from 'react-image-crop';\r\nimport 'react-image-crop/dist/ReactCrop.css';\r\nimport { Appointment } from './appointment.js';\r\n\r\nwindow.fn = {};\r\n\r\nwindow.fn.open = function () {\r\n  const menu = document.getElementById('menu');\r\n  menu.open();\r\n};\r\n\r\nwindow.fn.load = function (page) {\r\n  const content = document.getElementById('content');\r\n\r\n  content.load(page)\r\n    .then(() => {\r\n      const menu = document.getElementById('menu');\r\n      menu.close();\r\n\r\n      if (page === \"profile.html\") {\r\n        const main = document.querySelector('div#main_display');\r\n          getUserPhoto((data) => {\r\n            ReactDOM.render(<Profile picture={data.picture} email={cookies.get(login_cookie).email} />, main);\r\n          }, null, cookies.get(login_cookie).email)\r\n      }\r\n\r\n      if (page === \"users.html\") {\r\n        const user_list = document.querySelector('div#user_list');\r\n        ReactDOM.render(<Users />, user_list);\r\n      }\r\n\r\n      if (page === \"medical_record.html\") {\r\n        const medical_record_main = document.querySelector('div#medical_record_main');\r\n        ReactDOM.render(<MedicalRecord email={cookies.get(login_cookie).email} />, medical_record_main);\r\n      }\r\n\r\n      if (page === \"schedule_appointment.html\") {\r\n        const schedule_appointment_main = document.querySelector('div#schedule_appointment_main');\r\n        ReactDOM.render(<Appointment />, schedule_appointment_main);\r\n      }\r\n\r\n    });\r\n};\r\n\r\nwindow.fn.logout = logout;\r\nwindow.fn.back = back;\r\nwindow.fn.createAccount = createAccount;\r\nwindow.fn.login = login;\r\nwindow.fn.register = register;\r\n\r\nexport const loadPage = window.fn.load;\r\nexport const openMenu = window.fn.open;\r\n\r\nexport class Profile extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      accountInfo: {\r\n        picture: props.picture\r\n      },\r\n      email: props.email,\r\n      type: props.type,\r\n      enabled: props.enabled,\r\n      openedBy: props.openedBy,\r\n      crop: {\r\n        unit: '%',\r\n        x: 25,\r\n        y: 10,\r\n        width: 50,\r\n        aspect: 1,\r\n      }\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    const profile_basic_info = document.querySelector('div#profile_basic_info');\r\n    getBasicInfo((data) => {\r\n      ReactDOM.render(<BasicInfoProfile data={data} />, profile_basic_info);\r\n      this.title.innerHTML = '<b>'+ _default(data.basic_firstname, \"Firstname\") + \" \" + _default(data.basic_lastname, \"Lastname\") + \" \" + _default(data.basic_middlename, \"\") + '</b>'\r\n    }, 'profile', this.state.email);\r\n\r\n    const profile_illnesses = document.querySelector('div#profile_illnesses');\r\n    getIllnesses((data) => {\r\n      ReactDOM.render(<IllnessesProfile data={data} />, profile_illnesses);\r\n    }, 'profile', this.state.email);\r\n\r\n    const profile_medications = document.querySelector('div#profile_medications');\r\n    getMedications((data) => {\r\n      ReactDOM.render(<MedicationsProfile data={data} />, profile_medications);\r\n    }, 'profile', this.state.email);\r\n\r\n    const profile_vital_signs = document.querySelector('div#profile_vital_signs');\r\n    getVitalSigns((data) => {\r\n      ReactDOM.render(<VitalSignsProfile data={data} />, profile_vital_signs);\r\n    }, 'profile', this.state.email);\r\n\r\n    const profile_diet = document.querySelector('div#profile_diet');\r\n    getDiet((data) => {\r\n      ReactDOM.render(<DietProfile data={data} />, profile_diet);\r\n    }, 'profile', this.state.email);\r\n\r\n    const profile_others = document.querySelector('div#profile_others');\r\n    getOthers((data) => {\r\n      ReactDOM.render(<OthersProfile data={data} />, profile_others);\r\n    }, 'profile', this.state.email);\r\n\r\n    this.isAdminSwitch.checked = this.state.type === \"admin\" ? true : false;\r\n    this.isEnabledSwitch.checked = this.state.enabled;\r\n\r\n    this.isEnabledSwitch.addEventListener('change', (event) => {\r\n      const payload = {\r\n        email: this.state.email,\r\n        enabled: event.target.checked\r\n      }\r\n      putUser(payload, (data) => {\r\n        showAlert('Successfully updated settings');\r\n        this.setState({\r\n          enabled: event.target.checked\r\n        });\r\n      });\r\n    });\r\n\r\n    this.isAdminSwitch.addEventListener('change', (event) => {\r\n      const payload = {\r\n        email: this.state.email,\r\n        type: event.target.checked ? 'admin': 'user'\r\n      }\r\n      putUser(payload, (data) => {\r\n        showAlert('Successfully updated settings');\r\n        this.setState({\r\n          type: event.target.checked ? 'admin': 'user'\r\n        });\r\n      });\r\n    });\r\n\r\n    const profile_settings = document.querySelector('#profile_settings');\r\n    if (profile_settings != null) {\r\n      profile_settings.addEventListener('click', (event) => {\r\n        this.profile_settings_popover.show(event.target);\r\n      });\r\n    }\r\n  }\r\n  handlePictureClick = (event) => {\r\n    const profile_pic = document.querySelector('#profile_pic');\r\n    profile_pic.click();\r\n  }\r\n  handlePictureChange = (event, nav) => {\r\n    if (nav != null) {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(event.target.files[0]);\r\n      reader.onloadend = (event) => {\r\n        this.setState({ src: event.target.result });\r\n        nav.pushPage('new_profile_pic.html').then(()=>{\r\n          //initial load//\r\n          const new_pp_component = document.querySelector('#new_pp_component');\r\n          if (new_pp_component != null) {\r\n            ReactDOM.render(<ReactCrop src={this.state.src} crop={this.state.crop} ruleOfThirds={true} circularCrop={true} onChange={this.cropChange} onImageLoaded={this.imageLoaded} onComplete={this.cropComplete} />, new_pp_component);\r\n          }\r\n\r\n          const save_new_pp = document.querySelector('#save_new_pp');\r\n          if (save_new_pp != null) {\r\n            save_new_pp.addEventListener('click', (event) => {\r\n              const payload = {\r\n                email: this.state.email,\r\n                picture: this.state.croppedImageData\r\n              }\r\n              putUser(payload, (data) => {\r\n                  showAlert('Successfully updated profile picture');\r\n                  this.setState({\r\n                    accountInfo: {\r\n                      picture: this.state.croppedImageData\r\n                    }\r\n                  });\r\n                  const badge_pic = document.querySelector('#badge_pic');\r\n                  badge_pic.src = this.state.croppedImageData;\r\n                  back();\r\n              });\r\n            });\r\n          }\r\n        });\r\n      };\r\n    }\r\n  }\r\n  imageLoaded = (image) => {\r\n    this.imageRef = image\r\n  }\r\n  cropChange = (newCrop) => {\r\n    this.setState({ crop: newCrop });\r\n  }\r\n  cropComplete = (newCrop) => {\r\n    const image = this.imageRef;\r\n    const canvas = document.createElement('canvas');\r\n    const scaleX = image.naturalWidth / image.width;\r\n    const scaleY = image.naturalHeight / image.height;\r\n    const maxWidth = 200;\r\n    const maxHeight = 200;\r\n    canvas.width = maxWidth;\r\n    canvas.height = maxHeight;\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.drawImage(\r\n      image,\r\n      newCrop.x * scaleX,\r\n      newCrop.y * scaleY,\r\n      newCrop.width * scaleX,\r\n      newCrop.height * scaleY,\r\n      0,\r\n      0,\r\n      maxWidth,\r\n      maxHeight\r\n    );\r\n    \r\n    const croppedImage = ctx.canvas.toDataURL('image/png', 1.0);\r\n    this.setState({ croppedImageData: croppedImage });\r\n  }\r\n  handleEditAccess = (event) => {\r\n    this.popover.show(event.target);\r\n  }\r\n  handleChangePassword = (event) => {\r\n    this.change_password_popover.show(event.target);\r\n    this.profile_settings_popover.hide();    \r\n  }\r\n  handleChangePasswdSubmit = (event) => {\r\n    if(!validatePasswords(this.passwd.value, this.cpasswd.value)) {\r\n      // no pass\r\n    } else {\r\n      verifyUserPwd((data)=>{\r\n        if (data.verified) {\r\n          putUser({\r\n            email: this.state.email,\r\n            password: this.passwd.value\r\n          }, (data)=> {\r\n            showAlert('Successfully changed password')\r\n            this.change_password_popover.hide();\r\n            this.passwd.value = \"\";\r\n            this.cpasswd.value = \"\";\r\n            this.currentpasswd.value = \"\";\r\n            sendEmail({\r\n\t\t\t\t\t\t\tto: this.state.email,\r\n\t\t\t\t\t\t\tfrom: defaultEmailSender,\r\n\t\t\t\t\t\t\tsubject: \"Change Password Successful\",\r\n\t\t\t\t\t\t\tbody:\r\n\t\t\t\t\t\t\t\t'You have successfully changed your password.'\r\n\t\t\t\t\t\t});\r\n          })\r\n        } else {\r\n          showAlert('Current password cannot be verified')\r\n        }\r\n      }, {\r\n        email: this.state.email,\r\n        password: this.currentpasswd.value\r\n      });\r\n    }\r\n  }\r\n  handleViewOptions = (event) => {\r\n    this.viewSwitch.show();\r\n  }\r\n  handleSwitch = (event, index) => {\r\n    const carousel = document.querySelector('#carousel');\r\n    if (carousel != null) {\r\n      carousel.setActiveIndex(index); \r\n      this.viewSwitch.hide();\r\n      carousel.scrollIntoView();\r\n    }\r\n  }\r\n  render() {\r\n    const imgSrc = this.state.accountInfo.picture != null ? this.state.accountInfo.picture : defaultImg;\r\n    const displayCamIcon = this.state.openedBy === 'admin' ? 'none' : 'block';\r\n    const displayEditIcon = this.state.openedBy === 'admin' ? 'block' : 'none';\r\n    const nav = document.querySelector('#navigator');\r\n\r\n    const new_pp_component = document.querySelector('#new_pp_component');\r\n    if (new_pp_component != null) {\r\n      ReactDOM.render(<ReactCrop src={this.state.src} crop={this.state.crop} ruleOfThirds={true} onChange={this.cropChange} onImageLoaded={this.imageLoaded} onComplete={this.cropComplete} />, new_pp_component);\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <ons-card>\r\n            <div className=\"center\" align=\"center\">\r\n              <img className=\"list-item--material__thumbnail\" src={imgSrc} alt=\"Profile Pic\" style={{width: '100px', height: '100px'}} ></img>\r\n            </div>\r\n            <div id=\"profile_cam_icon\" align=\"center\" style={{ display: displayCamIcon }}>\r\n              <ons-icon icon=\"fa-camera\" onClick={this.handlePictureClick}></ons-icon>\r\n              <input type=\"file\" id=\"profile_pic\" style={{ display: 'none'}} onChange={(event)=>{this.handlePictureChange(event, nav)}} ></input>\r\n            </div>\r\n            <div className=\"title\" align=\"center\" ref={ref=>{this.title=ref}}></div>\r\n            <div align=\"center\" style={{ display: displayEditIcon }}>\r\n              <ons-button modifier=\"quiet\" onClick={this.handleEditAccess}>\r\n                <ons-icon icon=\"md-edit\"></ons-icon>&nbsp;Edit Access\r\n              </ons-button>\r\n            </div>\r\n        </ons-card>\r\n        <ons-popover direction=\"down\" id=\"popover\" cancelable={true} ref={ref=>{this.popover=ref}} style={{ position: 'fixed' }}>\r\n            <ons-list>\r\n              <ons-list-header>\r\n                <div className=\"left\">Settings</div>\r\n              </ons-list-header>\r\n              <ons-list-item>\r\n                <div className=\"left\">Set As Admin</div>\r\n                <div className=\"right\">\r\n                  <ons-switch ref={ref=>{this.isAdminSwitch=ref}} ></ons-switch>\r\n                </div>\r\n              </ons-list-item>\r\n              <ons-list-item>\r\n                <div className=\"left\">Enable User</div>\r\n                <div className=\"right\">\r\n                  <ons-switch ref={ref=>{this.isEnabledSwitch=ref}}></ons-switch>\r\n                </div>\r\n              </ons-list-item>\r\n            </ons-list>\r\n        </ons-popover>\r\n        <ons-popover direction=\"left\" id=\"popover\" cancelable={true} ref={ref=>{this.profile_settings_popover=ref}} style={{ position: 'fixed', marginTop: '60px' }}>\r\n            <p>\r\n              <ons-button modifier=\"quiet\" onClick={this.handleChangePassword}>Change Password</ons-button>\r\n            </p>\r\n        </ons-popover>\r\n        <ons-popover direction=\"down\" id=\"popover\" cancelable={true} ref={ref=>{this.change_password_popover=ref}} style={{ position: 'fixed'}}>\r\n          <ons-list>\r\n\t\t\t\t\t\t\t<ons-list-header>Change Password</ons-list-header>\r\n\t\t\t\t\t\t\t<div align=\"center\">\r\n                <p>\r\n\t\t\t\t\t\t\t\t\t<ons-input type=\"password\" placeholder=\"Current Password\" modifier=\"material\" ref={ref=>{this.currentpasswd=ref}}></ons-input>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t<ons-input type=\"password\" placeholder=\"New Password\" modifier=\"material\" ref={ref=>{this.passwd=ref}}></ons-input>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t<ons-input type=\"password\" placeholder=\"Confirm Password\" modifier=\"material\" ref={ref=>{this.cpasswd=ref}}></ons-input>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t<ons-button onClick={this.handleChangePasswdSubmit}>Submit</ons-button>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</ons-list>\r\n        </ons-popover>\r\n        <ons-fab position=\"bottom right\" style={{ position: 'fixed' }} modifier=\"mini\" onClick={this.handleViewOptions} >\r\n          <ons-icon icon=\"fa-exchange-alt\"></ons-icon>\r\n        </ons-fab>\r\n        <ons-action-sheet cancelable title=\"Switch to...\" ref={ref=>{this.viewSwitch=ref}} style={{ position: 'fixed' }} >\r\n          <ons-action-sheet-button icon=\"fa-id-card-alt\" onClick={(event)=>{this.handleSwitch(event, 0)}}>Basic Information</ons-action-sheet-button>\r\n          <ons-action-sheet-button icon=\"fa-diagnoses\" onClick={(event)=>{this.handleSwitch(event, 1)}}>Illnesses</ons-action-sheet-button>\r\n          <ons-action-sheet-button icon=\"fa-prescription\" onClick={(event)=>{this.handleSwitch(event, 2)}}>Medications</ons-action-sheet-button>\r\n          <ons-action-sheet-button icon=\"fa-heartbeat\" onClick={(event)=>{this.handleSwitch(event, 3)}}>Vital Signs</ons-action-sheet-button>\r\n          <ons-action-sheet-button icon=\"fa-mug-hot\" onClick={(event)=>{this.handleSwitch(event, 4)}}>Diet</ons-action-sheet-button>\r\n          <ons-action-sheet-button icon=\"fa-question-circle\" onClick={(event)=>{this.handleSwitch(event, 5)}}>Others</ons-action-sheet-button>\r\n          <ons-action-sheet-button icon=\"fa-times\" onClick={(event)=>{this.viewSwitch.hide()}}>Cancel</ons-action-sheet-button>\r\n        </ons-action-sheet>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport class MedicalRecord extends React.Component {\r\n    state = {\r\n      email: this.props.email\r\n    }\r\n    componentDidMount() {\r\n\r\n      this.tabbar.addEventListener('postchange', (event) => {\r\n          if (event.index === 0) {\r\n            const basicinfo_form = document.querySelector('div#basicinfo_form');\r\n            getBasicInfo((data) => {\r\n              ReactDOM.render(<BasicInfo data={data} />, basicinfo_form);\r\n            }, 'basic', cookies.get(login_cookie).email);\r\n            document.querySelector('#fab_add_medication').style.display = 'none';\r\n            document.querySelector('#fab_add_vitalsign').style.display = 'none';\r\n          }\r\n    \r\n          if (event.index === 1) {\r\n            const illnesses_list = document.querySelector('div#illnesses_list');\r\n            getIllnesses((data) => {\r\n              ReactDOM.render(<Illnesses data={data} />, illnesses_list);\r\n            }, 'illnesses', cookies.get(login_cookie).email);\r\n            document.querySelector('#fab_add_medication').style.display = 'none';\r\n            document.querySelector('#fab_add_vitalsign').style.display = 'none';\r\n          }\r\n    \r\n          if (event.index === 2) {\r\n            const medications_list = document.querySelector('div#medications_list');\r\n            getMedications((data) => {\r\n              ReactDOM.render(<Medications data={data} />, medications_list);\r\n            }, 'medications', cookies.get(login_cookie).email);\r\n            document.querySelector('#fab_add_medication').style.display = 'block';\r\n            document.querySelector('#fab_add_vitalsign').style.display = 'none';\r\n          }\r\n    \r\n          if (event.index === 3) {\r\n            const vitalsigns_list = document.querySelector('div#vitalsigns_list');\r\n            getVitalSigns((data) => {\r\n              ReactDOM.render(<VitalSigns data={data} />, vitalsigns_list);\r\n            }, 'vitalsigns', cookies.get(login_cookie).email);\r\n            document.querySelector('#fab_add_medication').style.display = 'none';\r\n            document.querySelector('#fab_add_vitalsign').style.display = 'block';\r\n          }\r\n    \r\n          if (event.index === 4) {\r\n            const diet_list = document.querySelector('div#diet_list');\r\n            getDiet((data) => {\r\n              ReactDOM.render(<Diet data={data} />, diet_list);\r\n            }, 'diet', cookies.get(login_cookie).email);\r\n            document.querySelector('#fab_add_medication').style.display = 'none';\r\n            document.querySelector('#fab_add_vitalsign').style.display = 'none';\r\n          }\r\n    \r\n          if (event.index === 5) {\r\n            const others_list = document.querySelector('div#others_list');\r\n            getOthers((data) => {\r\n              ReactDOM.render(<Others data={data} />, others_list);\r\n            }, 'others', cookies.get(login_cookie).email);\r\n            document.querySelector('#fab_add_medication').style.display = 'none';\r\n            document.querySelector('#fab_add_vitalsign').style.display = 'none';\r\n          }\r\n      });\r\n\r\n      this.tabbar.addEventListener('reactive', (event) => {\r\n        if (event.index === 0) {\r\n          const basicinfo_form = document.querySelector('div#basicinfo_form');\r\n          getBasicInfo((data) => {\r\n            ReactDOM.render(<BasicInfo data={data} />, basicinfo_form);\r\n          }, 'basic', cookies.get(login_cookie).email);\r\n        }\r\n      });\r\n\r\n      setTimeout(() => {\r\n        const basicinfo_form = document.querySelector('div#basicinfo_form');\r\n        getBasicInfo((data) => {\r\n          ReactDOM.render(<BasicInfo data={data} />, basicinfo_form);\r\n        }, 'basic', cookies.get(login_cookie).email);\r\n\r\n        const illnesses_list = document.querySelector('div#illnesses_list');\r\n        getIllnesses((data) => {\r\n          ReactDOM.render(<Illnesses data={data} />, illnesses_list);\r\n        }, 'illnesses', cookies.get(login_cookie).email);\r\n\r\n        const medications_list = document.querySelector('div#medications_list');\r\n        getMedications((data) => {\r\n          ReactDOM.render(<Medications data={data} />, medications_list);\r\n        }, 'medications', cookies.get(login_cookie).email);\r\n\r\n        const vitalsigns_list = document.querySelector('div#vitalsigns_list');\r\n        getVitalSigns((data) => {\r\n          ReactDOM.render(<VitalSigns data={data} />, vitalsigns_list);\r\n        }, 'vitalsigns', cookies.get(login_cookie).email);\r\n\r\n        const diet_list = document.querySelector('div#diet_list');\r\n        getDiet((data) => {\r\n          ReactDOM.render(<Diet data={data} />, diet_list);\r\n        }, 'diet', cookies.get(login_cookie).email);\r\n\r\n        const others_list = document.querySelector('div#others_list');\r\n        getOthers((data) => {\r\n          ReactDOM.render(<Others data={data} />, others_list);\r\n        }, 'others', cookies.get(login_cookie).email);\r\n\r\n      }, 500);\r\n\r\n    }\r\n    render() {\r\n      return (\r\n        <React.Fragment>\r\n            <ons-tabbar id=\"record_tabbar\" position=\"bottom\" ref={ref=>{this.tabbar=ref}}>\r\n              <ons-tab page=\"basicinfo.html\">\r\n                <input type=\"radio\" style={{ display: 'none'}} />\r\n                  <button className=\"tabbar__button\">\r\n                    <div className=\"tabbar__icon\">\r\n                      <i className=\"fas fa-id-card-alt fa-fw\"></i>\r\n                    </div>\r\n                  </button>    \r\n              </ons-tab>\r\n              <ons-tab page=\"illnesses.html\">\r\n                <input type=\"radio\" style={{ display: 'none'}} />\r\n                  <button className=\"tabbar__button\">\r\n                    <div className=\"tabbar__icon\">\r\n                    <i className=\"fas fa-diagnoses fa-fw\"></i>\r\n                    </div>\r\n                  </button>          \r\n              </ons-tab>\r\n              <ons-tab page=\"medications.html\">\r\n                <input type=\"radio\" style={{ display: 'none'}} />\r\n                  <button className=\"tabbar__button\">\r\n                    <div className=\"tabbar__icon\">\r\n                    <i className=\" fas fa-prescription fa-fw\"></i>\r\n                    </div>\r\n                  </button>          \r\n              </ons-tab>\r\n              <ons-tab page=\"vitalsigns.html\">\r\n                <input type=\"radio\" style={{ display: 'none'}} />\r\n                  <button className=\"tabbar__button\">\r\n                    <div className=\"tabbar__icon\">\r\n                    <i className=\" fas fa-heartbeat fa-fw\"></i>\r\n                    </div>\r\n                  </button>          \r\n              </ons-tab>\r\n              <ons-tab page=\"diet.html\">\r\n                <input type=\"radio\" style={{ display: 'none'}} />\r\n                  <button className=\"tabbar__button\">\r\n                    <div className=\"tabbar__icon\">\r\n                    <i className=\" fas fa-mug-hot fa-fw\"></i>\r\n                    </div>\r\n                  </button>          \r\n              </ons-tab>\r\n              <ons-tab page=\"others.html\">\r\n                <input type=\"radio\" style={{ display: 'none'}} />\r\n                  <button className=\"tabbar__button\">\r\n                    <div className=\"tabbar__icon\">\r\n                    <i class=\"far fa-question-circle\"></i>\r\n                    </div>\r\n                  </button>          \r\n              </ons-tab>\r\n          </ons-tabbar>\r\n          <ons-fab id=\"fab_add_medication\" modifier=\"mini\" position=\"bottom right\" style={{ marginBottom: '50px', display: 'none' }} >\r\n            <ons-icon icon=\"fa-plus\"></ons-icon>\r\n          </ons-fab>\r\n          <ons-fab id=\"fab_add_vitalsign\" modifier=\"mini\" position=\"bottom right\" style={{ marginBottom: '50px', display: 'none' }} >\r\n            <ons-icon icon=\"fa-plus\"></ons-icon>\r\n          </ons-fab>\r\n        </React.Fragment>\r\n      );\r\n    }\r\n}\r\n\r\nexport function getBasicInfo(successCallback=(data)=>{}, caller=\"\", identifier) {\r\n  const config = {\r\n    \"url\": api.users_api_base_url + \"/v1/basicInfo\",\r\n    \"method\": \"GET\",\r\n    \"timeout\": api.users_api_timeout,\r\n    \"headers\": {\r\n      \"Authorization\": api.users_api_authorization      \r\n    },\r\n    \"params\": {\r\n      \"id\": identifier\r\n    }\r\n  };\r\n  callApi(config, successCallback, caller, false);\r\n}\r\n\r\nexport function getIllnesses(successCallback=(data)=>{}, caller=\"\", identifier) {\r\n  const config = {\r\n    \"url\": api.users_api_base_url + \"/v1/illnesses\",\r\n    \"method\": \"GET\",\r\n    \"timeout\": api.users_api_timeout,\r\n    \"headers\": {\r\n      \"Authorization\": api.users_api_authorization      \r\n    },\r\n    \"params\": {\r\n      \"id\": identifier\r\n    }\r\n  };\r\n  callApi(config, successCallback, caller, false);\r\n}\r\n\r\nexport function getMedications(successCallback=(data)=>{}, caller=\"\", identifier) {\r\n  const config = {\r\n    \"url\": api.users_api_base_url + \"/v1/medications\",\r\n    \"method\": \"GET\",\r\n    \"timeout\": api.users_api_timeout,\r\n    \"headers\": {\r\n      \"Authorization\": api.users_api_authorization      \r\n    },\r\n    \"params\": {\r\n      \"id\": identifier\r\n    }\r\n  };\r\n  callApi(config, successCallback, caller, false);\r\n}\r\n\r\nexport function getVitalSigns(successCallback=(data)=>{}, caller=\"\", identifier) {\r\n  const config = {\r\n    \"url\": api.users_api_base_url + \"/v1/vitalSigns\",\r\n    \"method\": \"GET\",\r\n    \"timeout\": api.users_api_timeout,\r\n    \"headers\": {\r\n      \"Authorization\": api.users_api_authorization      \r\n    },\r\n    \"params\": {\r\n      \"id\": identifier\r\n    }\r\n  };\r\n  callApi(config, successCallback, caller, false);\r\n}\r\n\r\nexport function getDiet(successCallback=(data)=>{}, caller=\"\", identifier) {\r\n  const config = {\r\n    \"url\": api.users_api_base_url + \"/v1/diet\",\r\n    \"method\": \"GET\",\r\n    \"timeout\": api.users_api_timeout,\r\n    \"headers\": {\r\n      \"Authorization\": api.users_api_authorization      \r\n    },\r\n    \"params\": {\r\n      \"id\": identifier\r\n    }\r\n  };\r\n  callApi(config, successCallback, caller, false);\r\n}\r\n\r\nexport function getOthers(successCallback=(data)=>{}, caller=\"\", identifier) {\r\n  const config = {\r\n    \"url\": api.users_api_base_url + \"/v1/others\",\r\n    \"method\": \"GET\",\r\n    \"timeout\": api.users_api_timeout,\r\n    \"headers\": {\r\n      \"Authorization\": api.users_api_authorization      \r\n    },\r\n    \"params\": {\r\n      \"id\": identifier\r\n    }\r\n  };\r\n  callApi(config, successCallback, caller, false);\r\n}\r\n\r\nexport function getUserPhoto(successCallback=(data)=>{}, caller=\"\", identifier) {\r\n  const config = {\r\n    \"url\": api.users_api_base_url + \"/v1/users/photo\",\r\n    \"method\": \"GET\",\r\n    \"timeout\": api.users_api_timeout,\r\n    \"headers\": {\r\n      \"Authorization\": api.users_api_authorization      \r\n    },\r\n    \"params\": {\r\n      \"id\": identifier\r\n    }\r\n  };\r\n  callApi(config, successCallback, caller, false);\r\n}\r\n\r\nexport function getAllUsers(successCallback=(data)=>{}, caller=\"\") {\r\n  const config = {\r\n      \"url\": api.users_api_base_url + \"/v1/users/all\",\r\n      \"method\": \"GET\",\r\n      \"timeout\": 60000,\r\n      \"headers\": {\r\n          \"Authorization\": api.users_api_authorization\r\n      }\r\n  };\r\n  callApi(config, successCallback, caller, false);\r\n}\r\n\r\nexport function putUser(payload, successCallback=(data)=>{}, caller=\"\") {\r\n  const config = {\r\n    \"url\": api.users_api_base_url + \"/v1/users\",\r\n    \"method\": \"PUT\",\r\n    \"timeout\": api.users_api_timeout,\r\n    \"headers\": {\r\n      \"Authorization\": api.users_api_authorization,\r\n      \"Content-Type\": 'application/json'\r\n    },\r\n    \"data\": payload\r\n  };\r\n  callApi(config, successCallback, caller, true);\r\n}\r\n\r\nexport function resetUserPassword(successCallback=(data)=>{}, identifier) {\r\n  const config = {\r\n    \"url\": api.users_api_base_url + \"/v1/users/resetPwd\",\r\n    \"method\": \"GET\",\r\n    \"timeout\": api.users_api_timeout,\r\n    \"headers\": {\r\n      \"Authorization\": api.users_api_authorization\r\n    },\r\n    \"params\": {\r\n      \"email\": identifier\r\n    }\r\n  };\r\n  callApi(config, successCallback, \"\", false);\r\n}\r\n\r\nexport function sendEmail(payload, successCallback=(data)=>{}) {\r\n  const config = {\r\n    \"url\": api.users_api_base_url + \"/v1/notifications\",\r\n    \"method\": \"POST\",\r\n    \"timeout\": api.users_api_timeout,\r\n    \"headers\": {\r\n      \"Authorization\": api.users_api_authorization,\r\n      \"Content-Type\": 'application/json'\r\n    },\r\n    \"data\": payload,\r\n    \"params\": {\r\n      \"type\": \"simple_email\"\r\n    }\r\n  };\r\n  callApi(config, successCallback, \"\", false);\r\n}\r\n\r\nexport function verifyResetPassword(successCallback=(data)=>{}, code, email) {\r\n  const config = {\r\n    \"url\": api.users_api_base_url + \"/v1/users/verifyResetPwd\",\r\n    \"method\": \"GET\",\r\n    \"timeout\": api.users_api_timeout,\r\n    \"headers\": {\r\n      \"Authorization\": api.users_api_authorization\r\n    },\r\n    \"params\": {\r\n      \"code\": code, \r\n      \"email\": email\r\n    }\r\n  };\r\n  callApi(config, successCallback, \"\", false);\r\n}\r\n\r\nexport function verifyUserId(successCallback=(data)=>{}, email) {\r\n  const config = {\r\n    \"url\": api.users_api_base_url + \"/v1/users/verify\",\r\n    \"method\": \"GET\",\r\n    \"timeout\": api.users_api_timeout,\r\n    \"headers\": {\r\n      \"Authorization\": api.users_api_authorization\r\n    },\r\n    \"params\": {\r\n      \"id\": email\r\n    }\r\n  };\r\n  callApi(config, successCallback, \"\", false);\r\n}\r\n\r\nexport function verifyUserPwd(successCallback=(data)=>{}, payload) {\r\n  const config = {\r\n    \"url\": api.users_api_base_url + \"/v1/users/verifyPwd\",\r\n    \"method\": \"POST\",\r\n    \"timeout\": api.users_api_timeout,\r\n    \"headers\": {\r\n      \"Authorization\": api.users_api_authorization,\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    \"data\": payload\r\n  };\r\n  callApi(config, successCallback, \"\", false);\r\n}\r\n\r\nexport function obtainVerificationCode(successCallback=(data)=>{}, payload) {\r\n  const config = {\r\n    \"url\": api.users_api_base_url + \"/v1/users/verificationCode\",\r\n    \"method\": \"POST\",\r\n    \"timeout\": api.users_api_timeout,\r\n    \"headers\": {\r\n      \"Authorization\": api.users_api_authorization,\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    \"data\": payload\r\n  };\r\n  callApi(config, successCallback, \"\", false);\r\n}\r\n\r\nexport function verifyAccount(successCallback=(data)=>{}, email, code, create) {\r\n  const config = {\r\n    \"url\": api.users_api_base_url + \"/v1/users/verifyAccount\",\r\n    \"method\": \"GET\",\r\n    \"timeout\": api.users_api_timeout,\r\n    \"headers\": {\r\n      \"Authorization\": api.users_api_authorization\r\n    },\r\n    \"params\": {\r\n      \"email\": email,\r\n      \"code\": code,\r\n      \"create\": create\r\n    }\r\n  };\r\n  callApi(config, successCallback, \"\", false);\r\n}\r\n\r\n","import 'react-app-polyfill/ie9';\r\nimport 'react-app-polyfill/ie11';\r\nimport 'react-app-polyfill/stable';\r\nimport 'onsenui/css/onsenui.min.css';\r\nimport 'onsenui/css/onsen-css-components.min.css';\r\nimport './index.css';\r\n\r\nimport { api, defaultImg, login_cookie, cookieSettings, emailRegExp, defaultEmailSender } from './config.js';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { loadPage, getUserPhoto, resetUserPassword, sendEmail, verifyResetPassword, putUser, verifyUserId, obtainVerificationCode, verifyAccount } from './home.js';\r\nimport axios from 'axios';\r\nimport ons from 'onsenui';\r\nimport Cookies from 'universal-cookie';\r\nimport FacebookLogin from 'react-facebook-login';\r\n\r\nexport const cookies = new Cookies();\r\n\r\nexport function login() {\r\n\tconst email = document.querySelector('#index_email').value;\r\n\tconst password = document.querySelector('#index_password').value;\r\n\r\n\tif (!email || !password) {\r\n\t\tshowAlert(\"Please enter username/password\");\r\n\t} else {\r\n\t\tconst config = {\r\n\t\t\t\"url\": api.users_api_base_url + \"/v1/users\",\r\n\t\t\t\"method\": \"GET\",\r\n\t\t\t\"timeout\": api.users_api_timeout,\r\n\t\t\t\"headers\": {\r\n\t\t\t\t\"email\": email,\r\n\t\t\t\t\"password\": password,\r\n\t\t\t\t\"Authorization\": api.users_api_authorization\r\n\t\t\t}\r\n\t\t};\r\n\t\tcallApi(config, (data) => {\r\n\t\t\tif (Object.keys(data).length !== 0) {\r\n\t\t\t\tsetLoginCookie(data);\r\n\t\t\t\thome();\r\n\t\t\t}\r\n\t\t}, 'login');\r\n\t}\r\n}\r\n\r\nexport function register() {\r\n\tconst navigator = document.querySelector('#navigator');\r\n\tnavigator.pushPage('register.html')\r\n}\r\n\r\nexport function createAccount() {\r\n\tconst email = document.querySelector('#register_email').value;\r\n\tconst firstname = document.querySelector('#register_firstname').value;\r\n\tconst lastname = document.querySelector('#register_lastname').value;\r\n\tconst passwd = document.querySelector('#register_password').value;\r\n\tconst cpasswd = document.querySelector('#register_cpassword').value;\r\n\r\n\tif (validateRegistrationForm(email, firstname, lastname, passwd, cpasswd)) {\r\n\t\tconst payload = {\r\n\t\t\t\"email\": email,\r\n\t\t\t\"password\": passwd,\r\n\t\t\t\"firstname\": firstname,\r\n\t\t\t\"lastname\": lastname,\r\n\t\t\t\"type\": \"user\",\r\n\t\t\t\"enabled\": false\r\n\t\t};\r\n\t\tconst config = {\r\n\t\t\t\"url\": api.users_api_base_url + \"/v1/users\",\r\n\t\t\t\"method\": \"POST\",\r\n\t\t\t\"timeout\": api.users_api_timeout,\r\n\t\t\t\"headers\": {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\"Authorization\": api.users_api_authorization\r\n\t\t\t},\r\n\t\t\t\"data\": payload\r\n\t\t};\r\n\t\tcallApi(config, (data) => {\r\n\t\t\tif (Object.keys(data).length !== 0) {\r\n\t\t\t\tconst userInfoData = {\r\n\t\t\t\t\temail: email,\r\n\t\t\t\t\tenabled: true\r\n\t\t\t\t}\r\n\t\t\t\tobtainVerificationCode((data)=>{\r\n\t\t\t\t\tsendEmail({\r\n\t\t\t\t\t\tto: userInfoData.email,\r\n\t\t\t\t\t\tfrom: defaultEmailSender,\r\n\t\t\t\t\t\tsubject: \"Account Verification Request\",\r\n\t\t\t\t\t\tbody:\r\n\t\t\t\t\t\t\t'To proceed please click the link below:\\n\\n' +\r\n\t\t\t\t\t\t\t\tdata.callbackUrl +\r\n\t\t\t\t\t\t\t'\\n\\nPlease note that this request is only valid for 1 hour. Please ignore this email if you did not request for account verification.'\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tshowAlert(\"Account successfully created. Please check your email to verify your account.\")\r\n\t\t\t\t}, userInfoData);\r\n\r\n\t\t\t\tback();\r\n\t\t\t}\r\n\t\t}, 'register');\r\n\t}\r\n}\r\n\r\nexport function back(navigator=document.querySelector('#navigator')) {\r\n\tif (navigator != null) {\r\n\t\tnavigator.popPage();\r\n\t}\r\n}\r\n\r\nfunction home() {\r\n\tconst navigator = document.querySelector('#navigator');\r\n\tif (navigator != null) {\r\n\t\tnavigator.pushPage('home.html');\r\n\t}\r\n}\r\n\r\nexport function logout() {\r\n\tdocument.querySelector('#confirm-dialog').show();\r\n}\r\n\r\n/////// HELPER FUNCTIONS ///////\r\n\r\nfunction validateRegistrationForm(email, firstname, lastname, passwd, cpasswd) {\r\n\tif (!emailRegExp.test(email)) {\r\n\t\tshowAlert('Invalid Email Address');\r\n\t} else if (firstname.length === 0) {\r\n\t\tshowAlert('First Name is blank');\r\n\t} else if (lastname.length === 0) {\r\n\t\tshowAlert('Last Name is blank');\r\n\t} else if (!validatePasswords(passwd, cpasswd)) {\r\n\t\t// no pass\r\n\t} else {\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nexport function validatePasswords(passwd, cpasswd) {\r\n\tif (passwd.length === 0) {\r\n\t\tshowAlert('Password is blank');\r\n\t} else if (cpasswd.length === 0) {\r\n\t\tshowAlert('Confirm Password is blank');\r\n\t} else if (passwd.length < 8) {\r\n\t\tshowAlert('Password must be at least 8 characters');\r\n\t} else if (passwd !== cpasswd) {\r\n\t\tshowAlert('Passwords don\\'t match');\r\n\t} else {\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nexport async function callApi(config = {}, successCallback = (data)=>{}, caller = '', displayAlert=true) {\r\n\tconst progress_bar = document.querySelector('#' + caller + '_pb');\r\n\tif (progress_bar != null) progress_bar.style.display = 'block';\r\n\tawait axios(config)\r\n\t\t.then((response) => {\r\n\t\t\tif (!response.data.error) {\r\n\t\t\t\tsuccessCallback(response.data);\r\n\t\t\t} else {\r\n\t\t\t\tif (displayAlert) showAlert(response.data.error);\r\n\t\t\t\tsuccessCallback({})\r\n\t\t\t}\r\n\t\t\tif (progress_bar != null) progress_bar.style.display = 'none';\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\tshowAlert(\"\" + error);\r\n\t\t\tif (progress_bar != null) progress_bar.style.display = 'none';\r\n\t\t});\r\n}\r\n\r\nexport function showAlert(msg, timeout=3000) {\r\n\tons.notification.toast(msg, { timeout: timeout, animation: 'lift' });\r\n}\r\n\r\nexport function formatDate(date) {\r\n\tif (date != null && date !== \"\") {\r\n\t\treturn date.getFullYear() + '/' + (date.getMonth() + 1) + '/' + date.getDate();\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nexport function formatTime(date) {\r\n\tif (date != null && date !== \"\") {\r\n\t\treturn (date.getHours() + \"\").padStart(2, '0') + ':' + (date.getMinutes() + \"\").padStart(2, '0');\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nexport function formatToDateString(date) {\r\n\tif (date != null && date !== \"\") {\r\n\t\tconst d = new Date(date);\r\n\t\treturn d.toDateString();\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nexport function formatToTimeString(date) {\r\n\tif (date != null && date !== \"\") {\r\n\t\tconst d = new Date();\r\n\t\tconst HH = date.split(':')[0];\r\n\t\tconst mm = date.split(':')[1];\r\n\t\td.setHours(HH);\r\n\t\td.setMinutes(mm);\r\n\t\td.setSeconds(0);\r\n\t\treturn d.toLocaleTimeString();\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nexport function setLoginCookie(data) {\r\n\tconst cookieData = {\r\n\t\temail: data.email,\r\n\t\tfirstname: data.firstname,\r\n\t\tlastname: data.lastname, \r\n\t\taccess_token: data.access_token,\r\n\t\ttype: data.type,\r\n\t\tenabled: data.enabled,\r\n\t\tthirdPartyLogin: _default(data.thirdPartyLogin, null),\r\n\t\tapplication: _default(data.application, null)\r\n\t}\r\n\tlet d = new Date();\r\n\td.setDate(d.getDate() + 7); //+7days\r\n\tcookies.set(login_cookie, cookieData, {\r\n\t\tpath: cookieSettings.path,\r\n\t\texpires: d,\r\n\t\t//secure: cookieSettings.secure,\r\n\t\tsameSite: cookieSettings.sameSite\r\n\t});\r\n}\r\n\r\nexport function _default(input, defaultValue) {\r\n\tif (input && input !== undefined && input != null && (input+\"\").trim() !== \"\") {\r\n\t\treturn input;\r\n\t} else {\r\n\t\treturn defaultValue;\r\n\t}\r\n}\r\n\r\nexport function getUrlParameter(name) {\r\n    name = name.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\r\n    var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\r\n    var results = regex.exec(window.location.search);\r\n    return results === null ? null : decodeURIComponent(results[1].replace(/\\+/g, ' '));\r\n};\r\n\r\n////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\nclass App extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tactiveLogin: cookies.get(login_cookie) != null\r\n\t\t}\r\n\t}\r\n\tresponseFacebook = (userInfo) => {\r\n\t\tif (userInfo.accessToken != null) {\r\n\t\t\tconst userInfoData = {\r\n\t\t\t\temail: userInfo.email,\r\n\t\t\t\tfirstname: userInfo.name,\r\n\t\t\t\tlastname: \"\",\r\n\t\t\t\ttype: \"user\",\r\n\t\t\t\tenabled: true,\r\n\t\t\t\t//picture: userInfo.picture.data.url,\r\n\t\t\t\tthirdPartyLogin: true,\r\n\t\t\t\t//access_token: userInfo.accessToken,\r\n\t\t\t\tapplication: \"facebook\"\r\n\t\t\t}\r\n\t\t\tverifyUserId((data)=>{\r\n\t\t\t\tif (data.exists) {\r\n\t\t\t\t\tif(data.thirdPartyLogin) {\r\n\t\t\t\t\t\tsetLoginCookie(userInfoData);\r\n\t\t\t\t\t\tthis.nav.pushPage('home.html');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tons.notification.alert('Your Facebook email address has already been registered for this application. Please sign in with your email and password.')\r\n\t\t\t\t\t\t\t.then((value)=>{\r\n\t\t\t\t\t\t\t\twindow.location.href = process.env.PUBLIC_URL;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tons.notification.confirm('Your Facebook email address is not registered or enabled for this application. Do you want to proceed with the registration?')\r\n\t\t\t\t\t\t.then((value)=> {\r\n\t\t\t\t\t\t\tif (value === 1) {\r\n\t\t\t\t\t\t\t\tobtainVerificationCode((data)=>{\r\n\t\t\t\t\t\t\t\t\tsendEmail({\r\n\t\t\t\t\t\t\t\t\t\tto: userInfoData.email,\r\n\t\t\t\t\t\t\t\t\t\tfrom: defaultEmailSender,\r\n\t\t\t\t\t\t\t\t\t\tsubject: \"Facebook Account Verification Request\",\r\n\t\t\t\t\t\t\t\t\t\tbody:\r\n\t\t\t\t\t\t\t\t\t\t\t'To proceed please click the link below:\\n\\n' +\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata.callbackUrl +\r\n\t\t\t\t\t\t\t\t\t\t\t'\\n\\nPlease note that this request is only valid for 1 hour. Please ignore this email if you did not request for account verification.'\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\tshowAlert(\"Please check your email to proceed\")\r\n\t\t\t\t\t\t\t\t}, userInfoData);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\twindow.location.href = process.env.PUBLIC_URL;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}, userInfo.email)\r\n\t\t}\r\n\t}\r\n\thandleLogout = () => {\r\n\t\tdocument.querySelector('#confirm-dialog').hide();\r\n\t\tcookies.remove(login_cookie, {\r\n\t\t\tpath: cookieSettings.path\r\n\t\t});\r\n\t\tthis.nav.resetToPage('login.html', { pop: true }).then(() => {\r\n\t\t\twindow.location.href = process.env.PUBLIC_URL\r\n\t\t\tthis.renderFacebookLogin();\r\n\t\t\tthis.renderForgotPassword();\r\n\t\t});\r\n\t}\r\n\trenderFacebookLogin = () => {\r\n\t\tconst facebook_loginBtn = document.querySelector('div#facebook_loginBtn');\r\n\t\tif (facebook_loginBtn != null) {\r\n\t\t\tReactDOM.render(\r\n\t\t\t\t<FacebookLogin\r\n\t\t\t\t\tappId=\"607869309830124\"\r\n\t\t\t\t\tautoLoad={false}\r\n\t\t\t\t\tfields=\"name,email\"\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tcallback={this.responseFacebook}\r\n\t\t\t\t\ticon=\"fa-facebook\"/>,\r\n\t\t\t\tfacebook_loginBtn\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\trenderForgotPassword = () => {\r\n\t\tconst forgotPasswordBtn = document.querySelector('#forgotPasswordBtn');\r\n\t\tif (forgotPasswordBtn != null) {\r\n\t\t\tReactDOM.render(<ForgotPassword />, forgotPasswordBtn);\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount() {\t\t\r\n\t\tif (this.nav != null) {\r\n\t\t\tthis.nav.addEventListener('postpush', (event) => {\r\n\t\t\t\tif (event.enterPage.matches('#login')) {\r\n\t\t\t\t\tthis.renderFacebookLogin();\r\n\t\t\t\t\tthis.renderForgotPassword();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (event.enterPage.matches('#home')) {\r\n\t\t\t\t\tconst confirm_logout = document.querySelector('div#confirm_logout');\r\n\t\t\t\t\tif (confirm_logout != null) {\r\n\t\t\t\t\t\tReactDOM.render(<ConfirmDialog message=\"Are you sure you want to log out?\" onOk={this.handleLogout} />, confirm_logout);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst badge = document.querySelector('#badge');\r\n\t\t\t\t\tif (badge != null && cookies.get(login_cookie) != null) {\r\n\t\t\t\t\t\tgetUserPhoto((data) => {\r\n\t\t\t\t\t\t\tReactDOM.render(<Badge accountInfo={cookies.get(login_cookie)} picture={data.picture} />, badge);\r\n\t\t\t\t\t\t}, null, cookies.get(login_cookie).email)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst admin_menu = document.querySelector('#admin_menu');\r\n\t\t\t\t\tif (cookies.get(login_cookie) != null && cookies.get(login_cookie).type === \"user\") {\r\n\t\t\t\t\t\tadmin_menu.style.display = 'none';\r\n\t\t\t\t\t} \r\n\t\t\t\t\telse if (cookies.get(login_cookie) != null && cookies.get(login_cookie).type === \"admin\") {\r\n\t\t\t\t\t\tadmin_menu.style.display = 'block';\r\n\t\t\t\t\t} \r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.nav.addEventListener('postpop', (event) => {\r\n\t\t\t\tif(event.leavePage.matches('#user_profile')) {\r\n\t\t\t\t\tconst pull_hook = document.querySelector('#pull-hook');\r\n\t\t\t\t\tif(pull_hook != null) {\r\n\t\t\t\t\t\tpull_hook.dispatchEvent(new Event('changestate'));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tconst landingPage = this.state.activeLogin ? \"home.html\" : \"login.html\";\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<ons-navigator swipeable id=\"navigator\" page={landingPage} ref={ref => { this.nav = ref }}>\r\n\t\t\t\t</ons-navigator>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\r\n\t}\r\n}\r\n\r\nexport class ConfirmDialog extends React.Component {\r\n\thandleCancel = (event) => {\r\n\t\tthis.dialog.hide();\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ons-alert-dialog id=\"confirm-dialog\" style={{ position: 'fixed' }} modifier=\"rowfooter\" ref={ref => { this.dialog = ref }}>\r\n\t\t\t\t<div className=\"alert-dialog-title\">Confirm</div>\r\n\t\t\t\t<div className=\"alert-dialog-content\">\r\n\t\t\t\t\t{this.props.message}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"alert-dialog-footer\">\r\n\t\t\t\t\t<ons-alert-dialog-button onClick={this.handleCancel}>Cancel</ons-alert-dialog-button>\r\n\t\t\t\t\t<ons-alert-dialog-button onClick={this.props.onOk}>OK</ons-alert-dialog-button>\r\n\t\t\t\t</div>\r\n\t\t\t</ons-alert-dialog>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass Badge extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\taccountInfo: props.accountInfo,\r\n\t\t\tpicture: props.picture\r\n\t\t}\r\n\t}\r\n\trender() {\r\n    \tconst imgSrc = this.state.picture != null ? this.state.picture : defaultImg;\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div className=\"left\">\r\n              \t\t<img className=\"list-item--material__thumbnail\" id=\"badge_pic\" src={imgSrc} alt=\"Profile Pic\" style={{width: '80px', height: '80px'}} onClick={()=>{loadPage('profile.html')}}></img>\r\n            \t</div>\r\n\t\t\t\t<div className=\"left\">\r\n\t\t\t\t\t<b>{_default(this.state.accountInfo.firstname, \"Firstname\") + \" \" + _default(this.state.accountInfo.lastname, \"\")}</b>\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nclass ForgotPassword extends React.Component {\r\n\thandlePopoverClick = (event) => {\r\n\t\tthis.popover.show(event.target);\r\n\t}\r\n\thandleSubmit = (event) => {\r\n\t\tif (!emailRegExp.test(this.email.value)) {\r\n\t\t\tshowAlert('Invalid Email Address');\r\n\t\t} else {\r\n\t\t\tthis.popover.hide();\r\n\t\t\tverifyUserId((data)=>{\r\n\t\t\t\tif (data.exists) {\r\n\t\t\t\t\tresetUserPassword((data)=>{\r\n\t\t\t\t\t\tsendEmail({\r\n\t\t\t\t\t\t\tto: this.email.value,\r\n\t\t\t\t\t\t\tfrom: defaultEmailSender,\r\n\t\t\t\t\t\t\tsubject: \"Change Password Request\",\r\n\t\t\t\t\t\t\tbody:\r\n\t\t\t\t\t\t\t\t'To proceed please click the link below:\\n\\n' +\r\n\t\t\t\t\t\t\t\t\tdata.callbackUrl +\r\n\t\t\t\t\t\t\t\t'\\n\\nPlease note that this request is only valid for 1 hour. Please ignore this email if you did not request for any password change.'\r\n\t\t\t\t\t\t});\r\n\t\t\r\n\t\t\t\t\t\tshowAlert(\"Please check your email to proceed\")\r\n\t\t\t\t\t}, this.email.value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tshowAlert('Email address is unverified or disabled. Please contact administrator.')\r\n\t\t\t\t}\r\n\t\t\t}, this.email.value)\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<ons-button modifier=\"quiet\" onClick={this.handlePopoverClick}>Forgot Password?</ons-button>\r\n\t\t\t\t<ons-popover direction=\"down\" id=\"popover\" cancelable={true} ref={ref=>{this.popover=ref}}>\r\n\t\t\t\t\t<div align=\"center\">\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<ons-input placeholder=\"Email\" modifier=\"material\" ref={ref=>{this.email=ref}} ></ons-input>\r\n\t\t\t\t\t\t<ons-button modifier=\"large--quiet\" onClick={this.handleSubmit} >Submit</ons-button>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</ons-popover>\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nclass ChangePassword extends React.Component {\r\n\thandleSubmit = (event) => {\r\n\t\tif (!validatePasswords(this.passwd.value, this.cpasswd.value)) {\r\n\t\t\t// no pass\r\n\t\t} else {\r\n\t\t\tverifyResetPassword((data)=>{\r\n\t\t\t\tif (data.verified) {\r\n\t\t\t\t\tputUser({\r\n\t\t\t\t\t\temail: this.props.email,\r\n\t\t\t\t\t\tenabled: true,\r\n\t\t\t\t\t\tpassword: this.passwd.value\r\n\t\t\t\t\t}, (data)=>{\r\n\t\t\t\t\t\tshowAlert('Successfully changed password');\r\n\t\t\t\t\t\tsendEmail({\r\n\t\t\t\t\t\t\tto: this.props.email,\r\n\t\t\t\t\t\t\tfrom: defaultEmailSender,\r\n\t\t\t\t\t\t\tsubject: \"Change Password Successful\",\r\n\t\t\t\t\t\t\tbody:\r\n\t\t\t\t\t\t\t\t'You have successfully changed your password.'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\twindow.location.href = process.env.PUBLIC_URL\r\n\t\t\t\t\t\t}, 5000);\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tshowAlert('Failed to verify this request')\r\n\t\t\t\t}\r\n\r\n\t\t\t}, this.props.code, this.props.email)\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div style={{ marginTop: '50%' }}>\r\n\t\t\t\t\t<ons-card>\r\n\t\t\t\t\t\t<ons-list>\r\n\t\t\t\t\t\t\t<ons-list-header>Change Password</ons-list-header>\r\n\t\t\t\t\t\t\t<div align=\"center\">\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t<ons-input type=\"password\" placeholder=\"New Password\" modifier=\"material\" ref={ref=>{this.passwd=ref}}></ons-input>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t<ons-input type=\"password\" placeholder=\"Confirm Password\" modifier=\"material\" ref={ref=>{this.cpasswd=ref}}></ons-input>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t<ons-button onClick={this.handleSubmit}>Submit</ons-button>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</ons-list>\r\n\t\t\t\t\t</ons-card>\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nclass VerifyAccount extends React.Component {\r\n\trender() {\r\n\t\tverifyAccount((data)=>{\r\n\t\t\tlet message;\r\n\t\t\tif (data.validated) {\r\n\t\t\t\tmessage = \"Account has been successfully verified\"\r\n\t\t\t\tsendEmail({\r\n\t\t\t\t\tto: this.props.email,\r\n\t\t\t\t\tfrom: defaultEmailSender,\r\n\t\t\t\t\tsubject: \"Account Verification Successful\",\r\n\t\t\t\t\tbody:\r\n\t\t\t\t\t\t'You have successfully verified your account. You may now be able to login.'\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tmessage = \"Failed to verify account\"\r\n\t\t\t}\r\n\t\t\tons.notification.alert(message)\r\n\t\t\t\t.then(value=>{\r\n\t\t\t\t\twindow.location.href = process.env.PUBLIC_URL\r\n\t\t\t\t});\r\n\r\n\t\t}, this.props.email, this.props.code, true);\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div align=\"center\"></div>\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nwindow.onload = () => {\r\n\tconst op = getUrlParameter('op');\r\n\tconst email = getUrlParameter('email'); \r\n\tconst code = getUrlParameter('code');\r\n\t\r\n\tif (op === \"changePassword\" && email != null && code != null) {\r\n\t\tReactDOM.render(<ChangePassword email={email} code={code} />, document.querySelector('div#root'));\r\n\r\n\t} else if (op === \"verifyAccount\" && email != null && code != null) {\r\n\t\tReactDOM.render(<VerifyAccount email={email} code={code} />, document.querySelector('div#root'));\r\n\r\n\t} else {\r\n\t\tReactDOM.render(<App />, document.querySelector('div#root'));\r\n\t}\r\n}"],"sourceRoot":""}